\doxysection{ei\+\_\+application.\+c}
\hypertarget{ei__application_8c_source}{}\label{ei__application_8c_source}\index{ei\_application.c@{ei\_application.c}}
\mbox{\hyperlink{ei__application_8c}{Go to the documentation of this file.}}
\begin{DoxyCode}{0}
\DoxyCodeLine{\Hypertarget{ei__application_8c_source_l00001}00001\ \textcolor{preprocessor}{\#include\ "{}\mbox{\hyperlink{ei__application_8h}{ei\_application.h}}"{}}}
\DoxyCodeLine{\Hypertarget{ei__application_8c_source_l00002}00002\ \textcolor{preprocessor}{\#include\ "{}\mbox{\hyperlink{ei__widget_8h}{ei\_widget.h}}"{}}}
\DoxyCodeLine{\Hypertarget{ei__application_8c_source_l00003}00003\ \textcolor{preprocessor}{\#include\ "{}\mbox{\hyperlink{ei__widgetclass_8h}{ei\_widgetclass.h}}"{}}}
\DoxyCodeLine{\Hypertarget{ei__application_8c_source_l00004}00004\ \textcolor{preprocessor}{\#include\ "{}\mbox{\hyperlink{ei__types_8h}{ei\_types.h}}"{}}}
\DoxyCodeLine{\Hypertarget{ei__application_8c_source_l00005}00005\ \textcolor{preprocessor}{\#include\ "{}\mbox{\hyperlink{hw__interface_8h}{hw\_interface.h}}"{}}}
\DoxyCodeLine{\Hypertarget{ei__application_8c_source_l00006}00006\ \textcolor{preprocessor}{\#include\ "{}\mbox{\hyperlink{ei__implementation_8h}{ei\_implementation.h}}"{}}\ \textcolor{comment}{//\ Contient\ extern\ g\_focused\_widget}}
\DoxyCodeLine{\Hypertarget{ei__application_8c_source_l00007}00007\ \textcolor{preprocessor}{\#include\ "{}\mbox{\hyperlink{ei__frame_8h}{ei\_frame.h}}"{}}}
\DoxyCodeLine{\Hypertarget{ei__application_8c_source_l00008}00008\ \textcolor{preprocessor}{\#include\ "{}\mbox{\hyperlink{ei__button_8h}{ei\_button.h}}"{}}}
\DoxyCodeLine{\Hypertarget{ei__application_8c_source_l00009}00009\ \textcolor{preprocessor}{\#include\ "{}\mbox{\hyperlink{ei__toplevel_8h}{ei\_toplevel.h}}"{}}}
\DoxyCodeLine{\Hypertarget{ei__application_8c_source_l00010}00010\ \textcolor{preprocessor}{\#include\ "{}\mbox{\hyperlink{ei__draw_8h}{ei\_draw.h}}"{}}}
\DoxyCodeLine{\Hypertarget{ei__application_8c_source_l00011}00011\ \textcolor{preprocessor}{\#include\ "{}\mbox{\hyperlink{ei__utils_8h}{ei\_utils.h}}"{}}}
\DoxyCodeLine{\Hypertarget{ei__application_8c_source_l00012}00012\ \textcolor{preprocessor}{\#include\ "{}\mbox{\hyperlink{ei__event_8h}{ei\_event.h}}"{}}}
\DoxyCodeLine{\Hypertarget{ei__application_8c_source_l00013}00013\ \textcolor{preprocessor}{\#include\ "{}\mbox{\hyperlink{ei__placer_8h}{ei\_placer.h}}"{}}}
\DoxyCodeLine{\Hypertarget{ei__application_8c_source_l00014}00014\ }
\DoxyCodeLine{\Hypertarget{ei__application_8c_source_l00015}00015\ \textcolor{preprocessor}{\#include\ <stdio.h>}}
\DoxyCodeLine{\Hypertarget{ei__application_8c_source_l00016}00016\ \textcolor{preprocessor}{\#include\ <stdlib.h>}}
\DoxyCodeLine{\Hypertarget{ei__application_8c_source_l00017}00017\ \textcolor{preprocessor}{\#include\ <string.h>}}
\DoxyCodeLine{\Hypertarget{ei__application_8c_source_l00018}00018\ }
\DoxyCodeLine{\Hypertarget{ei__application_8c_source_l00019}00019\ }
\DoxyCodeLine{\Hypertarget{ei__application_8c_source_l00020}00020\ \textcolor{comment}{//\ Définition\ des\ variables\ globales}}
\DoxyCodeLine{\Hypertarget{ei__application_8c_source_l00021}\mbox{\hyperlink{ei__application_8c_a17e93c0ffff66a7ab8772ba47b5c9247}{00021}}\ \mbox{\hyperlink{hw__interface_8h_ad9970ae727c438faaf09c58c5defb796}{ei\_surface\_t}}\ \mbox{\hyperlink{ei__application_8c_a17e93c0ffff66a7ab8772ba47b5c9247}{g\_pick\_surface}}\ =\ NULL;}
\DoxyCodeLine{\Hypertarget{ei__application_8c_source_l00022}\mbox{\hyperlink{ei__application_8c_a927cc0bd7b0f916273c19c13ee945884}{00022}}\ \mbox{\hyperlink{structei__impl__widget__t}{ei\_widget\_t}}\ \ \mbox{\hyperlink{ei__application_8c_a927cc0bd7b0f916273c19c13ee945884}{g\_root\_widget}}\ \ =\ NULL;}
\DoxyCodeLine{\Hypertarget{ei__application_8c_source_l00023}\mbox{\hyperlink{ei__application_8c_af057b3392365e53cef4a502a9545d957}{00023}}\ \mbox{\hyperlink{hw__interface_8h_ad9970ae727c438faaf09c58c5defb796}{ei\_surface\_t}}\ \mbox{\hyperlink{ei__application_8c_af057b3392365e53cef4a502a9545d957}{g\_root\_surface}}\ =\ NULL;}
\DoxyCodeLine{\Hypertarget{ei__application_8c_source_l00024}00024\ }
\DoxyCodeLine{\Hypertarget{ei__application_8c_source_l00025}\mbox{\hyperlink{ei__application_8c_adf16c7601d0dee7e249df427f279f5fc}{00025}}\ \textcolor{keywordtype}{bool}\ \ \ \ \ \ \ \ \ \mbox{\hyperlink{ei__application_8c_adf16c7601d0dee7e249df427f279f5fc}{g\_application\_quit\_request}}\ =\ \textcolor{keyword}{false};}
\DoxyCodeLine{\Hypertarget{ei__application_8c_source_l00026}\mbox{\hyperlink{ei__application_8c_a4ce7400aee2f40ea5ed13d365aca2411}{00026}}\ \mbox{\hyperlink{ei__event_8h_a56e9f31f2e1a00ec293691774d98316a}{ei\_default\_handle\_func\_t}}\ \mbox{\hyperlink{ei__application_8c_a4ce7400aee2f40ea5ed13d365aca2411}{g\_default\_event\_handler}}\ =\ NULL;}
\DoxyCodeLine{\Hypertarget{ei__application_8c_source_l00027}\mbox{\hyperlink{ei__application_8c_ab6b06e918968174d19887b720e87c93e}{00027}}\ \mbox{\hyperlink{structei__impl__widget__t}{ei\_widget\_t}}\ \ \mbox{\hyperlink{ei__application_8c_ab6b06e918968174d19887b720e87c93e}{g\_active\_widget}}\ =\ NULL;}
\DoxyCodeLine{\Hypertarget{ei__application_8c_source_l00028}\mbox{\hyperlink{ei__application_8c_abe078f7b5f43c071865e0dcea94d6a4c}{00028}}\ \mbox{\hyperlink{structei__impl__widget__t}{ei\_widget\_t}}\ \ \mbox{\hyperlink{ei__application_8c_abe078f7b5f43c071865e0dcea94d6a4c}{g\_focused\_widget}}\ =\ NULL;\ \textcolor{comment}{//\ Définition\ de\ la\ variable\ globale}}
\DoxyCodeLine{\Hypertarget{ei__application_8c_source_l00029}00029\ }
\DoxyCodeLine{\Hypertarget{ei__application_8c_source_l00030}\mbox{\hyperlink{ei__application_8c_a0d6a9fdaa1def766dd715b3c11a363a5}{00030}}\ \textcolor{keyword}{static}\ \mbox{\hyperlink{structei__linked__rect__t}{ei\_linked\_rect\_t}}*\ \mbox{\hyperlink{ei__application_8c_a0d6a9fdaa1def766dd715b3c11a363a5}{g\_invalidated\_rects\_head}}\ =\ NULL;}
\DoxyCodeLine{\Hypertarget{ei__application_8c_source_l00031}00031\ }
\DoxyCodeLine{\Hypertarget{ei__application_8c_source_l00032}00032\ }
\DoxyCodeLine{\Hypertarget{ei__application_8c_source_l00033}\mbox{\hyperlink{ei__application_8h_abc6e645a651352bb46481a920a516709}{00033}}\ \textcolor{keywordtype}{void}\ \mbox{\hyperlink{ei__application_8c_abc6e645a651352bb46481a920a516709}{ei\_app\_create}}(\mbox{\hyperlink{structei__size__t}{ei\_size\_t}}\ main\_window\_size,\ \textcolor{keywordtype}{bool}\ fullscreen)\ \{}
\DoxyCodeLine{\Hypertarget{ei__application_8c_source_l00034}00034\ \ \ \ \ \mbox{\hyperlink{hw__interface_8h_ae58df14f30461cb37e8607aca5522846}{hw\_init}}();}
\DoxyCodeLine{\Hypertarget{ei__application_8c_source_l00035}00035\ }
\DoxyCodeLine{\Hypertarget{ei__application_8c_source_l00036}00036\ \ \ \ \ \mbox{\hyperlink{ei__types_8h_a722bfa1a8a9a4202fb2d4abce2f06a8c}{ei\_default\_font}}\ =\ \mbox{\hyperlink{hw__interface_8h_a48a92497e03818dbb284c192943928ea}{hw\_text\_font\_create}}(\mbox{\hyperlink{ei__types_8h_aa888e6bf1302563264631d781918f6d6}{ei\_default\_font\_filename}},\ \mbox{\hyperlink{ei__types_8h_a2438d9879374e1d4805231e9e407bbaea9754cb1e12731d6a7697daa5678ebf72}{ei\_style\_normal}},\ \mbox{\hyperlink{ei__types_8h_a157b1b2a04132b2ac00400b202b134de}{ei\_font\_default\_size}});}
\DoxyCodeLine{\Hypertarget{ei__application_8c_source_l00037}00037\ \ \ \ \ \textcolor{keywordflow}{if}\ (\mbox{\hyperlink{ei__types_8h_a722bfa1a8a9a4202fb2d4abce2f06a8c}{ei\_default\_font}}\ ==\ NULL)\ \{}
\DoxyCodeLine{\Hypertarget{ei__application_8c_source_l00038}00038\ \ \ \ \ \ \ \ \ fprintf(stderr,\ \textcolor{stringliteral}{"{}Erreur\ fatale:\ Impossible\ de\ charger\ la\ police\ par\ défaut\ '\%s'.\(\backslash\)n"{}},\ \mbox{\hyperlink{ei__types_8h_aa888e6bf1302563264631d781918f6d6}{ei\_default\_font\_filename}});}
\DoxyCodeLine{\Hypertarget{ei__application_8c_source_l00039}00039\ \ \ \ \ \ \ \ \ \mbox{\hyperlink{hw__interface_8h_abe4354544a70c108fe5d8f17c69a2874}{hw\_quit}}();}
\DoxyCodeLine{\Hypertarget{ei__application_8c_source_l00040}00040\ \ \ \ \ \ \ \ \ exit(1);}
\DoxyCodeLine{\Hypertarget{ei__application_8c_source_l00041}00041\ \ \ \ \ \}}
\DoxyCodeLine{\Hypertarget{ei__application_8c_source_l00042}00042\ }
\DoxyCodeLine{\Hypertarget{ei__application_8c_source_l00043}00043\ \ \ \ \ \mbox{\hyperlink{ei__frame_8c_acdfaf4883aa16509c0d51e35177eb6b9}{ei\_frame\_register\_class}}();}
\DoxyCodeLine{\Hypertarget{ei__application_8c_source_l00044}00044\ \ \ \ \ \mbox{\hyperlink{ei__button_8c_a838fccb1cd368bdb5dd486f5fcb07ac3}{ei\_button\_register\_class}}();}
\DoxyCodeLine{\Hypertarget{ei__application_8c_source_l00045}00045\ \ \ \ \ \mbox{\hyperlink{ei__toplevel_8c_a856904bc16ac897b9a2385e67402d570}{ei\_toplevel\_register\_class}}();}
\DoxyCodeLine{\Hypertarget{ei__application_8c_source_l00046}00046\ }
\DoxyCodeLine{\Hypertarget{ei__application_8c_source_l00047}00047\ \ \ \ \ \mbox{\hyperlink{ei__application_8c_af057b3392365e53cef4a502a9545d957}{g\_root\_surface}}\ =\ \mbox{\hyperlink{hw__interface_8h_aa012ef4374709eeb3fe5af60324e8dd7}{hw\_create\_window}}(main\_window\_size,\ fullscreen);}
\DoxyCodeLine{\Hypertarget{ei__application_8c_source_l00048}00048\ \ \ \ \ \textcolor{keywordflow}{if}\ (\mbox{\hyperlink{ei__application_8c_af057b3392365e53cef4a502a9545d957}{g\_root\_surface}}\ ==\ NULL)\ \{}
\DoxyCodeLine{\Hypertarget{ei__application_8c_source_l00049}00049\ \ \ \ \ \ \ \ \ fprintf(stderr,\ \textcolor{stringliteral}{"{}ei\_app\_create:\ hw\_create\_window\ a\ échoué.\(\backslash\)n"{}});}
\DoxyCodeLine{\Hypertarget{ei__application_8c_source_l00050}00050\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (\mbox{\hyperlink{ei__types_8h_a722bfa1a8a9a4202fb2d4abce2f06a8c}{ei\_default\_font}})\ \mbox{\hyperlink{hw__interface_8h_a2ac46d37db4c40adc10e3afb137f9f02}{hw\_text\_font\_free}}(\mbox{\hyperlink{ei__types_8h_a722bfa1a8a9a4202fb2d4abce2f06a8c}{ei\_default\_font}});}
\DoxyCodeLine{\Hypertarget{ei__application_8c_source_l00051}00051\ \ \ \ \ \ \ \ \ \mbox{\hyperlink{hw__interface_8h_abe4354544a70c108fe5d8f17c69a2874}{hw\_quit}}();}
\DoxyCodeLine{\Hypertarget{ei__application_8c_source_l00052}00052\ \ \ \ \ \ \ \ \ exit(1);}
\DoxyCodeLine{\Hypertarget{ei__application_8c_source_l00053}00053\ \ \ \ \ \}}
\DoxyCodeLine{\Hypertarget{ei__application_8c_source_l00054}00054\ \ \ \ \ \textcolor{keywordflow}{if}\ (fullscreen)\ \{}
\DoxyCodeLine{\Hypertarget{ei__application_8c_source_l00055}00055\ \ \ \ \ \ \ \ \ main\_window\_size\ =\ \mbox{\hyperlink{hw__interface_8h_a7b92235ad70d5017c843c66affccdcd2}{hw\_surface\_get\_size}}(\mbox{\hyperlink{ei__application_8c_af057b3392365e53cef4a502a9545d957}{g\_root\_surface}});}
\DoxyCodeLine{\Hypertarget{ei__application_8c_source_l00056}00056\ \ \ \ \ \}}
\DoxyCodeLine{\Hypertarget{ei__application_8c_source_l00057}00057\ }
\DoxyCodeLine{\Hypertarget{ei__application_8c_source_l00058}00058\ \ \ \ \ \mbox{\hyperlink{ei__application_8c_a17e93c0ffff66a7ab8772ba47b5c9247}{g\_pick\_surface}}\ =\ \mbox{\hyperlink{hw__interface_8h_a20b18780e7aac3439a983a8fa0464c03}{hw\_surface\_create}}(\mbox{\hyperlink{ei__application_8c_af057b3392365e53cef4a502a9545d957}{g\_root\_surface}},\ main\_window\_size,\ \textcolor{keyword}{false});}
\DoxyCodeLine{\Hypertarget{ei__application_8c_source_l00059}00059\ \ \ \ \ \textcolor{keywordflow}{if}\ (\mbox{\hyperlink{ei__application_8c_a17e93c0ffff66a7ab8772ba47b5c9247}{g\_pick\_surface}}\ ==\ NULL)\ \{}
\DoxyCodeLine{\Hypertarget{ei__application_8c_source_l00060}00060\ \ \ \ \ \ \ \ \ fprintf(stderr,\ \textcolor{stringliteral}{"{}Erreur:\ Impossible\ de\ créer\ la\ surface\ de\ picking.\(\backslash\)n"{}});}
\DoxyCodeLine{\Hypertarget{ei__application_8c_source_l00061}00061\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (\mbox{\hyperlink{ei__application_8c_af057b3392365e53cef4a502a9545d957}{g\_root\_surface}})\ \mbox{\hyperlink{hw__interface_8h_a97d0cca63330b33140dd40288ae1022b}{hw\_surface\_free}}(\mbox{\hyperlink{ei__application_8c_af057b3392365e53cef4a502a9545d957}{g\_root\_surface}});}
\DoxyCodeLine{\Hypertarget{ei__application_8c_source_l00062}00062\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (\mbox{\hyperlink{ei__types_8h_a722bfa1a8a9a4202fb2d4abce2f06a8c}{ei\_default\_font}})\ \mbox{\hyperlink{hw__interface_8h_a2ac46d37db4c40adc10e3afb137f9f02}{hw\_text\_font\_free}}(\mbox{\hyperlink{ei__types_8h_a722bfa1a8a9a4202fb2d4abce2f06a8c}{ei\_default\_font}});}
\DoxyCodeLine{\Hypertarget{ei__application_8c_source_l00063}00063\ \ \ \ \ \ \ \ \ \mbox{\hyperlink{hw__interface_8h_abe4354544a70c108fe5d8f17c69a2874}{hw\_quit}}();}
\DoxyCodeLine{\Hypertarget{ei__application_8c_source_l00064}00064\ \ \ \ \ \ \ \ \ exit(1);}
\DoxyCodeLine{\Hypertarget{ei__application_8c_source_l00065}00065\ \ \ \ \ \}}
\DoxyCodeLine{\Hypertarget{ei__application_8c_source_l00066}00066\ }
\DoxyCodeLine{\Hypertarget{ei__application_8c_source_l00067}00067\ \ \ \ \ \mbox{\hyperlink{ei__application_8c_a927cc0bd7b0f916273c19c13ee945884}{g\_root\_widget}}\ =\ \mbox{\hyperlink{ei__widget_8h_af05d9b442d1c9ac845dc74d64f7f7239}{ei\_widget\_create}}(\textcolor{stringliteral}{"{}frame"{}},\ NULL,\ NULL,\ NULL);}
\DoxyCodeLine{\Hypertarget{ei__application_8c_source_l00068}00068\ \ \ \ \ \textcolor{keywordflow}{if}\ (\mbox{\hyperlink{ei__application_8c_a927cc0bd7b0f916273c19c13ee945884}{g\_root\_widget}}\ ==\ NULL)\ \{}
\DoxyCodeLine{\Hypertarget{ei__application_8c_source_l00069}00069\ \ \ \ \ \ \ \ \ fprintf(stderr,\ \textcolor{stringliteral}{"{}ei\_app\_create:\ ei\_widget\_create\ pour\ le\ root\ a\ échoué.\(\backslash\)n"{}});}
\DoxyCodeLine{\Hypertarget{ei__application_8c_source_l00070}00070\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (\mbox{\hyperlink{ei__application_8c_a17e93c0ffff66a7ab8772ba47b5c9247}{g\_pick\_surface}})\ \mbox{\hyperlink{hw__interface_8h_a97d0cca63330b33140dd40288ae1022b}{hw\_surface\_free}}(\mbox{\hyperlink{ei__application_8c_a17e93c0ffff66a7ab8772ba47b5c9247}{g\_pick\_surface}});}
\DoxyCodeLine{\Hypertarget{ei__application_8c_source_l00071}00071\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (\mbox{\hyperlink{ei__application_8c_af057b3392365e53cef4a502a9545d957}{g\_root\_surface}})\ \mbox{\hyperlink{hw__interface_8h_a97d0cca63330b33140dd40288ae1022b}{hw\_surface\_free}}(\mbox{\hyperlink{ei__application_8c_af057b3392365e53cef4a502a9545d957}{g\_root\_surface}});}
\DoxyCodeLine{\Hypertarget{ei__application_8c_source_l00072}00072\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (\mbox{\hyperlink{ei__types_8h_a722bfa1a8a9a4202fb2d4abce2f06a8c}{ei\_default\_font}})\ \mbox{\hyperlink{hw__interface_8h_a2ac46d37db4c40adc10e3afb137f9f02}{hw\_text\_font\_free}}(\mbox{\hyperlink{ei__types_8h_a722bfa1a8a9a4202fb2d4abce2f06a8c}{ei\_default\_font}});}
\DoxyCodeLine{\Hypertarget{ei__application_8c_source_l00073}00073\ \ \ \ \ \ \ \ \ \mbox{\hyperlink{hw__interface_8h_abe4354544a70c108fe5d8f17c69a2874}{hw\_quit}}();}
\DoxyCodeLine{\Hypertarget{ei__application_8c_source_l00074}00074\ \ \ \ \ \ \ \ \ exit(1);}
\DoxyCodeLine{\Hypertarget{ei__application_8c_source_l00075}00075\ \ \ \ \ \}}
\DoxyCodeLine{\Hypertarget{ei__application_8c_source_l00076}00076\ }
\DoxyCodeLine{\Hypertarget{ei__application_8c_source_l00077}00077\ \ \ \ \ \mbox{\hyperlink{ei__application_8c_a927cc0bd7b0f916273c19c13ee945884}{g\_root\_widget}}-\/>\mbox{\hyperlink{structei__impl__widget__t_a4917a94e71d8fe03d8cf3b2b90953e5f}{screen\_location}}.\mbox{\hyperlink{structei__rect__t_aabe78780aa971b9cb9742ed59a2e9438}{top\_left}}\ =\ \mbox{\hyperlink{ei__utils_8h_a0340ad040bce7744b00c5b2f73e41fcb}{ei\_point\_zero}}();}
\DoxyCodeLine{\Hypertarget{ei__application_8c_source_l00078}00078\ \ \ \ \ \mbox{\hyperlink{ei__application_8c_a927cc0bd7b0f916273c19c13ee945884}{g\_root\_widget}}-\/>\mbox{\hyperlink{structei__impl__widget__t_a4917a94e71d8fe03d8cf3b2b90953e5f}{screen\_location}}.\mbox{\hyperlink{structei__rect__t_a200c48a352d448a24d4f85673f6bad14}{size}}\ =\ main\_window\_size;}
\DoxyCodeLine{\Hypertarget{ei__application_8c_source_l00079}00079\ \ \ \ \ \textcolor{comment}{//\ Avec\ la\ modification\ de\ content\_rect\_value,\ ceci\ est\ fait\ dans\ ei\_widget\_create}}
\DoxyCodeLine{\Hypertarget{ei__application_8c_source_l00080}00080\ \ \ \ \ \textcolor{comment}{//\ et\ affiné\ par\ ei\_impl\_placer\_run\ ou\ geomnotifyfunc.}}
\DoxyCodeLine{\Hypertarget{ei__application_8c_source_l00081}00081\ \ \ \ \ \textcolor{comment}{//\ g\_root\_widget-\/>content\_rect\_value\ =\ g\_root\_widget-\/>screen\_location;}}
\DoxyCodeLine{\Hypertarget{ei__application_8c_source_l00082}00082\ \ \ \ \ \mbox{\hyperlink{ei__implementation_8h_a5761c9590158c7d37714479307ee1059}{ei\_impl\_placer\_run}}(\mbox{\hyperlink{ei__application_8c_a927cc0bd7b0f916273c19c13ee945884}{g\_root\_widget}});\ \textcolor{comment}{//\ Pour\ initialiser\ content\_rect\_value\ correctement}}
\DoxyCodeLine{\Hypertarget{ei__application_8c_source_l00083}00083\ \}}
\DoxyCodeLine{\Hypertarget{ei__application_8c_source_l00084}00084\ }
\DoxyCodeLine{\Hypertarget{ei__application_8c_source_l00085}\mbox{\hyperlink{ei__application_8c_a1757f430fc2f6fd40ac1a784ca22fbc3}{00085}}\ \textcolor{keyword}{static}\ \textcolor{keywordtype}{void}\ \mbox{\hyperlink{ei__application_8c_a1757f430fc2f6fd40ac1a784ca22fbc3}{redraw\_invalidated\_areas}}()\ \{}
\DoxyCodeLine{\Hypertarget{ei__application_8c_source_l00086}00086\ \ \ \ \ \textcolor{keywordflow}{if}\ (\mbox{\hyperlink{ei__application_8c_a927cc0bd7b0f916273c19c13ee945884}{g\_root\_widget}}\ ==\ NULL\ ||\ \mbox{\hyperlink{ei__application_8c_a927cc0bd7b0f916273c19c13ee945884}{g\_root\_widget}}-\/>\mbox{\hyperlink{structei__impl__widget__t_aa6ab44d2da83877b1d83e1a6cea7034e}{wclass}}\ ==\ NULL\ ||\ \mbox{\hyperlink{ei__application_8c_a927cc0bd7b0f916273c19c13ee945884}{g\_root\_widget}}-\/>\mbox{\hyperlink{structei__impl__widget__t_aa6ab44d2da83877b1d83e1a6cea7034e}{wclass}}-\/>\mbox{\hyperlink{structei__widgetclass__t_a528168099a2a1515c4cf65400ccbfff2}{drawfunc}}\ ==\ NULL)\ \{}
\DoxyCodeLine{\Hypertarget{ei__application_8c_source_l00087}00087\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return};}
\DoxyCodeLine{\Hypertarget{ei__application_8c_source_l00088}00088\ \ \ \ \ \}}
\DoxyCodeLine{\Hypertarget{ei__application_8c_source_l00089}00089\ \ \ \ \ \textcolor{keywordflow}{if}\ (\mbox{\hyperlink{ei__application_8c_a0d6a9fdaa1def766dd715b3c11a363a5}{g\_invalidated\_rects\_head}}\ ==\ NULL)\ \{}
\DoxyCodeLine{\Hypertarget{ei__application_8c_source_l00090}00090\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return};}
\DoxyCodeLine{\Hypertarget{ei__application_8c_source_l00091}00091\ \ \ \ \ \}}
\DoxyCodeLine{\Hypertarget{ei__application_8c_source_l00092}00092\ }
\DoxyCodeLine{\Hypertarget{ei__application_8c_source_l00093}00093\ \ \ \ \ \mbox{\hyperlink{hw__interface_8h_a1b9b22f29bb9de0b39ea904fd66251be}{hw\_surface\_lock}}(\mbox{\hyperlink{ei__application_8c_af057b3392365e53cef4a502a9545d957}{g\_root\_surface}});}
\DoxyCodeLine{\Hypertarget{ei__application_8c_source_l00094}00094\ \ \ \ \ \mbox{\hyperlink{hw__interface_8h_a1b9b22f29bb9de0b39ea904fd66251be}{hw\_surface\_lock}}(\mbox{\hyperlink{ei__application_8c_a17e93c0ffff66a7ab8772ba47b5c9247}{g\_pick\_surface}});}
\DoxyCodeLine{\Hypertarget{ei__application_8c_source_l00095}00095\ }
\DoxyCodeLine{\Hypertarget{ei__application_8c_source_l00096}00096\ \ \ \ \ \mbox{\hyperlink{structei__color__t}{ei\_color\_t}}\ pick\_clear\_color\ =\ \{0,\ 0,\ 0,\ 0xff\};}
\DoxyCodeLine{\Hypertarget{ei__application_8c_source_l00097}00097\ \ \ \ \ \mbox{\hyperlink{ei__draw_8h_a8df4b1a25d4b7c46851a4e7a12a45b2e}{ei\_fill}}(\mbox{\hyperlink{ei__application_8c_a17e93c0ffff66a7ab8772ba47b5c9247}{g\_pick\_surface}},\ \&pick\_clear\_color,\ NULL);}
\DoxyCodeLine{\Hypertarget{ei__application_8c_source_l00098}00098\ }
\DoxyCodeLine{\Hypertarget{ei__application_8c_source_l00099}00099\ \ \ \ \ \textcolor{comment}{//\ Parcourir\ chaque\ rectangle\ invalidé\ et\ redessiner\ cette\ zone}}
\DoxyCodeLine{\Hypertarget{ei__application_8c_source_l00100}00100\ \ \ \ \ \mbox{\hyperlink{structei__linked__rect__t}{ei\_linked\_rect\_t}}*\ current\_invalid\_rect\_node\ =\ \mbox{\hyperlink{ei__application_8c_a0d6a9fdaa1def766dd715b3c11a363a5}{g\_invalidated\_rects\_head}};}
\DoxyCodeLine{\Hypertarget{ei__application_8c_source_l00101}00101\ \ \ \ \ \textcolor{keywordflow}{while}\ (current\_invalid\_rect\_node\ !=\ NULL)\ \{}
\DoxyCodeLine{\Hypertarget{ei__application_8c_source_l00102}00102\ \ \ \ \ \ \ \ \ \textcolor{comment}{//\ Le\ clipper\ pour\ la\ drawfunc\ du\ root\_widget\ est\ le\ rectangle\ invalidé\ courant}}
\DoxyCodeLine{\Hypertarget{ei__application_8c_source_l00103}00103\ \ \ \ \ \ \ \ \ \mbox{\hyperlink{ei__application_8c_a927cc0bd7b0f916273c19c13ee945884}{g\_root\_widget}}-\/>\mbox{\hyperlink{structei__impl__widget__t_aa6ab44d2da83877b1d83e1a6cea7034e}{wclass}}-\/>\mbox{\hyperlink{structei__widgetclass__t_a528168099a2a1515c4cf65400ccbfff2}{drawfunc}}(\mbox{\hyperlink{ei__application_8c_a927cc0bd7b0f916273c19c13ee945884}{g\_root\_widget}},\ \mbox{\hyperlink{ei__application_8c_af057b3392365e53cef4a502a9545d957}{g\_root\_surface}},\ \mbox{\hyperlink{ei__application_8c_a17e93c0ffff66a7ab8772ba47b5c9247}{g\_pick\_surface}},\ \&(current\_invalid\_rect\_node-\/>\mbox{\hyperlink{structei__linked__rect__t_ae7fa184a482756ca81a340de0775cc8b}{rect}}));}
\DoxyCodeLine{\Hypertarget{ei__application_8c_source_l00104}00104\ \ \ \ \ \ \ \ \ current\_invalid\_rect\_node\ =\ current\_invalid\_rect\_node-\/>\mbox{\hyperlink{structei__linked__rect__t_ad31a83bb4babee5aaae18ccedad52755}{next}};}
\DoxyCodeLine{\Hypertarget{ei__application_8c_source_l00105}00105\ \ \ \ \ \}}
\DoxyCodeLine{\Hypertarget{ei__application_8c_source_l00106}00106\ \ \ \ \ \textcolor{comment}{//\ NE\ PAS\ LIBÉRER\ g\_invalidated\_rects\_head\ ICI}}
\DoxyCodeLine{\Hypertarget{ei__application_8c_source_l00107}00107\ }
\DoxyCodeLine{\Hypertarget{ei__application_8c_source_l00108}00108\ \ \ \ \ \mbox{\hyperlink{hw__interface_8h_abf4681e5ead295ccf5b3df3ec8adab66}{hw\_surface\_unlock}}(\mbox{\hyperlink{ei__application_8c_a17e93c0ffff66a7ab8772ba47b5c9247}{g\_pick\_surface}});}
\DoxyCodeLine{\Hypertarget{ei__application_8c_source_l00109}00109\ \ \ \ \ \mbox{\hyperlink{hw__interface_8h_abf4681e5ead295ccf5b3df3ec8adab66}{hw\_surface\_unlock}}(\mbox{\hyperlink{ei__application_8c_af057b3392365e53cef4a502a9545d957}{g\_root\_surface}});}
\DoxyCodeLine{\Hypertarget{ei__application_8c_source_l00110}00110\ }
\DoxyCodeLine{\Hypertarget{ei__application_8c_source_l00111}00111\ \ \ \ \ \textcolor{comment}{//\ Mettre\ à\ jour\ uniquement\ les\ zones\ qui\ ont\ été\ invalidées}}
\DoxyCodeLine{\Hypertarget{ei__application_8c_source_l00112}00112\ \ \ \ \ \mbox{\hyperlink{hw__interface_8h_a6fa41442ed6ec84a120734f7c4fca9a3}{hw\_surface\_update\_rects}}(\mbox{\hyperlink{ei__application_8c_af057b3392365e53cef4a502a9545d957}{g\_root\_surface}},\ \mbox{\hyperlink{ei__application_8c_a0d6a9fdaa1def766dd715b3c11a363a5}{g\_invalidated\_rects\_head}});\ \textcolor{comment}{//\ Utilise\ la\ liste}}
\DoxyCodeLine{\Hypertarget{ei__application_8c_source_l00113}00113\ }
\DoxyCodeLine{\Hypertarget{ei__application_8c_source_l00114}00114\ \ \ \ \ \textcolor{comment}{//\ Vider\ la\ liste\ des\ rectangles\ invalidés\ APRÈS\ hw\_surface\_update\_rects}}
\DoxyCodeLine{\Hypertarget{ei__application_8c_source_l00115}00115\ \ \ \ \ \mbox{\hyperlink{structei__linked__rect__t}{ei\_linked\_rect\_t}}*\ node\_to\_free\ =\ \mbox{\hyperlink{ei__application_8c_a0d6a9fdaa1def766dd715b3c11a363a5}{g\_invalidated\_rects\_head}};}
\DoxyCodeLine{\Hypertarget{ei__application_8c_source_l00116}00116\ \ \ \ \ \textcolor{keywordflow}{while}\ (node\_to\_free\ !=\ NULL)\ \{}
\DoxyCodeLine{\Hypertarget{ei__application_8c_source_l00117}00117\ \ \ \ \ \ \ \ \ \mbox{\hyperlink{structei__linked__rect__t}{ei\_linked\_rect\_t}}*\ next\_node\ =\ node\_to\_free-\/>\mbox{\hyperlink{structei__linked__rect__t_ad31a83bb4babee5aaae18ccedad52755}{next}};}
\DoxyCodeLine{\Hypertarget{ei__application_8c_source_l00118}00118\ \ \ \ \ \ \ \ \ free(node\_to\_free);}
\DoxyCodeLine{\Hypertarget{ei__application_8c_source_l00119}00119\ \ \ \ \ \ \ \ \ node\_to\_free\ =\ next\_node;}
\DoxyCodeLine{\Hypertarget{ei__application_8c_source_l00120}00120\ \ \ \ \ \}}
\DoxyCodeLine{\Hypertarget{ei__application_8c_source_l00121}00121\ \ \ \ \ \mbox{\hyperlink{ei__application_8c_a0d6a9fdaa1def766dd715b3c11a363a5}{g\_invalidated\_rects\_head}}\ =\ NULL;}
\DoxyCodeLine{\Hypertarget{ei__application_8c_source_l00122}00122\ \}\ \textcolor{comment}{//\ Fin\ de\ redraw\_invalidated\_areas}}
\DoxyCodeLine{\Hypertarget{ei__application_8c_source_l00123}00123\ }
\DoxyCodeLine{\Hypertarget{ei__application_8c_source_l00124}00124\ }
\DoxyCodeLine{\Hypertarget{ei__application_8c_source_l00125}\mbox{\hyperlink{ei__application_8h_aa56224cc923d7e0c52d2e5c62be60e6a}{00125}}\ \textcolor{keywordtype}{void}\ \mbox{\hyperlink{ei__application_8c_aa56224cc923d7e0c52d2e5c62be60e6a}{ei\_app\_run}}(\textcolor{keywordtype}{void})\ \{}
\DoxyCodeLine{\Hypertarget{ei__application_8c_source_l00126}00126\ \ \ \ \ \mbox{\hyperlink{structei__event__t}{ei\_event\_t}}\ event;}
\DoxyCodeLine{\Hypertarget{ei__application_8c_source_l00127}00127\ \ \ \ \ \mbox{\hyperlink{ei__application_8c_adf16c7601d0dee7e249df427f279f5fc}{g\_application\_quit\_request}}\ =\ \textcolor{keyword}{false};}
\DoxyCodeLine{\Hypertarget{ei__application_8c_source_l00128}00128\ }
\DoxyCodeLine{\Hypertarget{ei__application_8c_source_l00129}00129\ \ \ \ \ \textcolor{keywordflow}{if}\ (\mbox{\hyperlink{ei__application_8c_a927cc0bd7b0f916273c19c13ee945884}{g\_root\_widget}}\ ==\ NULL)\ \{}
\DoxyCodeLine{\Hypertarget{ei__application_8c_source_l00130}00130\ \ \ \ \ \ \ \ \ fprintf(stderr,\ \textcolor{stringliteral}{"{}ei\_app\_run:\ Erreur\ critique\ -\/\ Widget\ racine\ non\ initialisé.\(\backslash\)n"{}});}
\DoxyCodeLine{\Hypertarget{ei__application_8c_source_l00131}00131\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return};}
\DoxyCodeLine{\Hypertarget{ei__application_8c_source_l00132}00132\ \ \ \ \ \}}
\DoxyCodeLine{\Hypertarget{ei__application_8c_source_l00133}00133\ }
\DoxyCodeLine{\Hypertarget{ei__application_8c_source_l00134}00134\ \ \ \ \ \mbox{\hyperlink{ei__application_8c_a92110923e2f3b88c9e0c5cf5071cf410}{ei\_app\_invalidate\_rect}}(\&(\mbox{\hyperlink{ei__application_8c_a927cc0bd7b0f916273c19c13ee945884}{g\_root\_widget}}-\/>\mbox{\hyperlink{structei__impl__widget__t_a4917a94e71d8fe03d8cf3b2b90953e5f}{screen\_location}}));}
\DoxyCodeLine{\Hypertarget{ei__application_8c_source_l00135}00135\ \ \ \ \ \mbox{\hyperlink{ei__application_8c_a1757f430fc2f6fd40ac1a784ca22fbc3}{redraw\_invalidated\_areas}}();}
\DoxyCodeLine{\Hypertarget{ei__application_8c_source_l00136}00136\ }
\DoxyCodeLine{\Hypertarget{ei__application_8c_source_l00137}00137\ \ \ \ \ \textcolor{keywordflow}{while}\ (!\mbox{\hyperlink{ei__application_8c_adf16c7601d0dee7e249df427f279f5fc}{g\_application\_quit\_request}})\ \{}
\DoxyCodeLine{\Hypertarget{ei__application_8c_source_l00138}00138\ \ \ \ \ \ \ \ \ \mbox{\hyperlink{hw__interface_8h_a512ddccf5f945ac12df4b5e226b2a974}{hw\_event\_wait\_next}}(\&event);}
\DoxyCodeLine{\Hypertarget{ei__application_8c_source_l00139}00139\ }
\DoxyCodeLine{\Hypertarget{ei__application_8c_source_l00140}00140\ \ \ \ \ \ \ \ \ \mbox{\hyperlink{structei__impl__widget__t}{ei\_widget\_t}}\ target\_widget\ =\ NULL;}
\DoxyCodeLine{\Hypertarget{ei__application_8c_source_l00141}00141\ \ \ \ \ \ \ \ \ \textcolor{keywordtype}{bool}\ event\_handled\_by\_target\ =\ \textcolor{keyword}{false};}
\DoxyCodeLine{\Hypertarget{ei__application_8c_source_l00142}00142\ }
\DoxyCodeLine{\Hypertarget{ei__application_8c_source_l00143}00143\ \ \ \ \ \ \ \ \ \mbox{\hyperlink{structei__impl__widget__t}{ei\_widget\_t}}\ current\_active\_widget\ =\ \mbox{\hyperlink{ei__event_8h_a929e765ce56f1902f9873fb5bc3eec5e}{ei\_event\_get\_active\_widget}}();}
\DoxyCodeLine{\Hypertarget{ei__application_8c_source_l00144}00144\ \ \ \ \ \ \ \ \ \mbox{\hyperlink{structei__impl__widget__t}{ei\_widget\_t}}\ current\_focused\_widget\ =\ \mbox{\hyperlink{ei__application_8c_a1cabe600ee52159a214f6d50c374f138}{ei\_app\_get\_focus}}();}
\DoxyCodeLine{\Hypertarget{ei__application_8c_source_l00145}00145\ }
\DoxyCodeLine{\Hypertarget{ei__application_8c_source_l00146}00146\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (current\_active\_widget\ !=\ NULL)\ \{}
\DoxyCodeLine{\Hypertarget{ei__application_8c_source_l00147}00147\ \ \ \ \ \ \ \ \ \ \ \ \ target\_widget\ =\ current\_active\_widget;}
\DoxyCodeLine{\Hypertarget{ei__application_8c_source_l00148}00148\ \ \ \ \ \ \ \ \ \}\ \textcolor{keywordflow}{else}\ \textcolor{keywordflow}{if}\ ((event.\mbox{\hyperlink{structei__event__t_aee18f11986ed603959de628558812c58}{type}}\ ==\ \mbox{\hyperlink{ei__event_8h_a132dde064150d861ad24e9d839cbe007aa5fcf0b8e2fdda85acdde99bdd089cd3}{ei\_ev\_keydown}}\ ||\ event.\mbox{\hyperlink{structei__event__t_aee18f11986ed603959de628558812c58}{type}}\ ==\ \mbox{\hyperlink{ei__event_8h_a132dde064150d861ad24e9d839cbe007af556498fd29604b3770b8fc2969cd3f1}{ei\_ev\_keyup}}\ ||\ event.\mbox{\hyperlink{structei__event__t_aee18f11986ed603959de628558812c58}{type}}\ ==\ \mbox{\hyperlink{ei__event_8h_a132dde064150d861ad24e9d839cbe007a4052c91c33e26ab1b1e3dda29ce3ce8d}{ei\_ev\_text\_input}})\ \&\&\ current\_focused\_widget\ !=\ NULL)\ \{}
\DoxyCodeLine{\Hypertarget{ei__application_8c_source_l00149}00149\ \ \ \ \ \ \ \ \ \ \ \ \ target\_widget\ =\ current\_focused\_widget;}
\DoxyCodeLine{\Hypertarget{ei__application_8c_source_l00150}00150\ \ \ \ \ \ \ \ \ \}\ \textcolor{keywordflow}{else}\ \textcolor{keywordflow}{if}\ (event.\mbox{\hyperlink{structei__event__t_aee18f11986ed603959de628558812c58}{type}}\ >=\ \mbox{\hyperlink{ei__event_8h_a132dde064150d861ad24e9d839cbe007ae75b2b6a8423d54c46a418d222e0af66}{ei\_ev\_mouse\_buttondown}}\ \&\&\ event.\mbox{\hyperlink{structei__event__t_aee18f11986ed603959de628558812c58}{type}}\ <=\ \mbox{\hyperlink{ei__event_8h_a132dde064150d861ad24e9d839cbe007afb9e01bdf8b710050bc18bc473e6f45b}{ei\_ev\_mouse\_wheel}})\ \{}
\DoxyCodeLine{\Hypertarget{ei__application_8c_source_l00151}00151\ \ \ \ \ \ \ \ \ \ \ \ \ target\_widget\ =\ \mbox{\hyperlink{ei__widget_8h_acb8c17b67534dd9a42e9e64149a98482}{ei\_widget\_pick}}(\&(event.\mbox{\hyperlink{structei__event__t_a4672a7bfde55275174a723359a0487ab}{param}}.\mbox{\hyperlink{structei__event__t_a7f0b0d0cf765a822aca7a435510d9d85}{mouse}}.\mbox{\hyperlink{structei__mouse__event__t_ac50f216f7af2a99469bd39cebc309af5}{where}}));}
\DoxyCodeLine{\Hypertarget{ei__application_8c_source_l00152}00152\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{comment}{//\ Optionnel:\ Donner\ le\ focus\ au\ widget\ cliqué\ s'il\ est\ "{}focusable"{}}}
\DoxyCodeLine{\Hypertarget{ei__application_8c_source_l00153}00153\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{comment}{//\ if\ (target\_widget\ !=\ NULL\ \&\&\ target\_widget\ !=\ ei\_app\_root\_widget())\ \{}}
\DoxyCodeLine{\Hypertarget{ei__application_8c_source_l00154}00154\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{comment}{//\ \ \ \ \ //\ Ajouter\ une\ vérification\ si\ la\ classe\ du\ widget\ est\ focusable}}
\DoxyCodeLine{\Hypertarget{ei__application_8c_source_l00155}00155\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{comment}{//\ \ \ \ \ //\ par\ exemple,\ if\ (target\_widget-\/>wclass-\/>is\_focusable)}}
\DoxyCodeLine{\Hypertarget{ei__application_8c_source_l00156}00156\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{comment}{//\ \ \ \ \ ei\_app\_set\_focus(target\_widget);}}
\DoxyCodeLine{\Hypertarget{ei__application_8c_source_l00157}00157\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{comment}{//\ \}}}
\DoxyCodeLine{\Hypertarget{ei__application_8c_source_l00158}00158\ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{\Hypertarget{ei__application_8c_source_l00159}00159\ }
\DoxyCodeLine{\Hypertarget{ei__application_8c_source_l00160}00160\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (target\_widget\ !=\ NULL\ \&\&\ target\_widget-\/>\mbox{\hyperlink{structei__impl__widget__t_aa6ab44d2da83877b1d83e1a6cea7034e}{wclass}}\ !=\ NULL\ \&\&\ target\_widget-\/>\mbox{\hyperlink{structei__impl__widget__t_aa6ab44d2da83877b1d83e1a6cea7034e}{wclass}}-\/>\mbox{\hyperlink{structei__widgetclass__t_a5ed633370e3c90d21244d93d5467227e}{handlefunc}}\ !=\ NULL)\ \{}
\DoxyCodeLine{\Hypertarget{ei__application_8c_source_l00161}00161\ \ \ \ \ \ \ \ \ \ \ \ \ event\_handled\_by\_target\ =\ target\_widget-\/>\mbox{\hyperlink{structei__impl__widget__t_aa6ab44d2da83877b1d83e1a6cea7034e}{wclass}}-\/>\mbox{\hyperlink{structei__widgetclass__t_a5ed633370e3c90d21244d93d5467227e}{handlefunc}}(target\_widget,\ \&event);}
\DoxyCodeLine{\Hypertarget{ei__application_8c_source_l00162}00162\ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{\Hypertarget{ei__application_8c_source_l00163}00163\ }
\DoxyCodeLine{\Hypertarget{ei__application_8c_source_l00164}00164\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (!event\_handled\_by\_target)\ \{}
\DoxyCodeLine{\Hypertarget{ei__application_8c_source_l00165}00165\ \ \ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{ei__event_8h_a56e9f31f2e1a00ec293691774d98316a}{ei\_default\_handle\_func\_t}}\ dhf\ =\ \mbox{\hyperlink{ei__event_8h_a6e8c3b68b3e4c4f55a1d06cd9e0dcfb5}{ei\_event\_get\_default\_handle\_func}}();}
\DoxyCodeLine{\Hypertarget{ei__application_8c_source_l00166}00166\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (dhf\ !=\ NULL)\ \{}
\DoxyCodeLine{\Hypertarget{ei__application_8c_source_l00167}00167\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ dhf(\&event);}
\DoxyCodeLine{\Hypertarget{ei__application_8c_source_l00168}00168\ \ \ \ \ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{\Hypertarget{ei__application_8c_source_l00169}00169\ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{\Hypertarget{ei__application_8c_source_l00170}00170\ }
\DoxyCodeLine{\Hypertarget{ei__application_8c_source_l00171}00171\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (!\mbox{\hyperlink{ei__application_8c_adf16c7601d0dee7e249df427f279f5fc}{g\_application\_quit\_request}})\ \{}
\DoxyCodeLine{\Hypertarget{ei__application_8c_source_l00172}00172\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{comment}{//\ Le\ redessin\ se\ fait\ s'il\ y\ a\ des\ rectangles\ invalidés.}}
\DoxyCodeLine{\Hypertarget{ei__application_8c_source_l00173}00173\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{comment}{//\ ei\_app\_invalidate\_rect\ a\ dû\ être\ appelé\ par\ un\ handlefunc\ ou\ autre\ pour}}
\DoxyCodeLine{\Hypertarget{ei__application_8c_source_l00174}00174\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{comment}{//\ qu'un\ redessin\ ait\ lieu.}}
\DoxyCodeLine{\Hypertarget{ei__application_8c_source_l00175}00175\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{comment}{//\ Si\ vous\ voulez\ forcer\ un\ redessin\ après\ chaque\ événement\ pour\ le\ moment\ (debug):}}
\DoxyCodeLine{\Hypertarget{ei__application_8c_source_l00176}00176\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{comment}{//\ ei\_app\_invalidate\_rect(\&(g\_root\_widget-\/>screen\_location));}}
\DoxyCodeLine{\Hypertarget{ei__application_8c_source_l00177}00177\ \ \ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{ei__application_8c_a1757f430fc2f6fd40ac1a784ca22fbc3}{redraw\_invalidated\_areas}}();\ \textcolor{comment}{//\ Ne\ fait\ rien\ si\ g\_invalidated\_rects\_head\ est\ NULL}}
\DoxyCodeLine{\Hypertarget{ei__application_8c_source_l00178}00178\ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{\Hypertarget{ei__application_8c_source_l00179}00179\ \ \ \ \ \}}
\DoxyCodeLine{\Hypertarget{ei__application_8c_source_l00180}00180\ \}}
\DoxyCodeLine{\Hypertarget{ei__application_8c_source_l00181}00181\ }
\DoxyCodeLine{\Hypertarget{ei__application_8c_source_l00182}\mbox{\hyperlink{ei__application_8h_aeac990640f4b120663405ad656380546}{00182}}\ \textcolor{keywordtype}{void}\ \mbox{\hyperlink{ei__application_8c_aeac990640f4b120663405ad656380546}{ei\_app\_free}}(\textcolor{keywordtype}{void})\ \{}
\DoxyCodeLine{\Hypertarget{ei__application_8c_source_l00183}00183\ \ \ \ \ \mbox{\hyperlink{structei__linked__rect__t}{ei\_linked\_rect\_t}}*\ current\_invalid\ =\ \mbox{\hyperlink{ei__application_8c_a0d6a9fdaa1def766dd715b3c11a363a5}{g\_invalidated\_rects\_head}};}
\DoxyCodeLine{\Hypertarget{ei__application_8c_source_l00184}00184\ \ \ \ \ \textcolor{keywordflow}{while}\ (current\_invalid\ !=\ NULL)\ \{}
\DoxyCodeLine{\Hypertarget{ei__application_8c_source_l00185}00185\ \ \ \ \ \ \ \ \ \mbox{\hyperlink{structei__linked__rect__t}{ei\_linked\_rect\_t}}*\ next\ =\ current\_invalid-\/>\mbox{\hyperlink{structei__linked__rect__t_ad31a83bb4babee5aaae18ccedad52755}{next}};}
\DoxyCodeLine{\Hypertarget{ei__application_8c_source_l00186}00186\ \ \ \ \ \ \ \ \ free(current\_invalid);}
\DoxyCodeLine{\Hypertarget{ei__application_8c_source_l00187}00187\ \ \ \ \ \ \ \ \ current\_invalid\ =\ next;}
\DoxyCodeLine{\Hypertarget{ei__application_8c_source_l00188}00188\ \ \ \ \ \}}
\DoxyCodeLine{\Hypertarget{ei__application_8c_source_l00189}00189\ \ \ \ \ \mbox{\hyperlink{ei__application_8c_a0d6a9fdaa1def766dd715b3c11a363a5}{g\_invalidated\_rects\_head}}\ =\ NULL;}
\DoxyCodeLine{\Hypertarget{ei__application_8c_source_l00190}00190\ }
\DoxyCodeLine{\Hypertarget{ei__application_8c_source_l00191}00191\ \ \ \ \ \textcolor{keywordflow}{if}\ (\mbox{\hyperlink{ei__application_8c_a927cc0bd7b0f916273c19c13ee945884}{g\_root\_widget}}\ !=\ NULL)\ \{}
\DoxyCodeLine{\Hypertarget{ei__application_8c_source_l00192}00192\ \ \ \ \ \ \ \ \ \mbox{\hyperlink{ei__widget_8h_aedbe2a89b8e68342362710a55ee1858b}{ei\_widget\_destroy}}(\mbox{\hyperlink{ei__application_8c_a927cc0bd7b0f916273c19c13ee945884}{g\_root\_widget}});}
\DoxyCodeLine{\Hypertarget{ei__application_8c_source_l00193}00193\ \ \ \ \ \ \ \ \ \mbox{\hyperlink{ei__application_8c_a927cc0bd7b0f916273c19c13ee945884}{g\_root\_widget}}\ =\ NULL;}
\DoxyCodeLine{\Hypertarget{ei__application_8c_source_l00194}00194\ \ \ \ \ \}}
\DoxyCodeLine{\Hypertarget{ei__application_8c_source_l00195}00195\ \ \ \ \ \textcolor{keywordflow}{if}\ (\mbox{\hyperlink{ei__application_8c_a17e93c0ffff66a7ab8772ba47b5c9247}{g\_pick\_surface}}\ !=\ NULL)\ \{}
\DoxyCodeLine{\Hypertarget{ei__application_8c_source_l00196}00196\ \ \ \ \ \ \ \ \ \mbox{\hyperlink{hw__interface_8h_a97d0cca63330b33140dd40288ae1022b}{hw\_surface\_free}}(\mbox{\hyperlink{ei__application_8c_a17e93c0ffff66a7ab8772ba47b5c9247}{g\_pick\_surface}});}
\DoxyCodeLine{\Hypertarget{ei__application_8c_source_l00197}00197\ \ \ \ \ \ \ \ \ \mbox{\hyperlink{ei__application_8c_a17e93c0ffff66a7ab8772ba47b5c9247}{g\_pick\_surface}}\ =\ NULL;}
\DoxyCodeLine{\Hypertarget{ei__application_8c_source_l00198}00198\ \ \ \ \ \}}
\DoxyCodeLine{\Hypertarget{ei__application_8c_source_l00199}00199\ \ \ \ \ \textcolor{keywordflow}{if}\ (\mbox{\hyperlink{ei__application_8c_af057b3392365e53cef4a502a9545d957}{g\_root\_surface}}\ !=\ NULL)\ \{}
\DoxyCodeLine{\Hypertarget{ei__application_8c_source_l00200}00200\ \ \ \ \ \ \ \ \ \mbox{\hyperlink{hw__interface_8h_a97d0cca63330b33140dd40288ae1022b}{hw\_surface\_free}}(\mbox{\hyperlink{ei__application_8c_af057b3392365e53cef4a502a9545d957}{g\_root\_surface}});}
\DoxyCodeLine{\Hypertarget{ei__application_8c_source_l00201}00201\ \ \ \ \ \ \ \ \ \mbox{\hyperlink{ei__application_8c_af057b3392365e53cef4a502a9545d957}{g\_root\_surface}}\ =\ NULL;}
\DoxyCodeLine{\Hypertarget{ei__application_8c_source_l00202}00202\ \ \ \ \ \}}
\DoxyCodeLine{\Hypertarget{ei__application_8c_source_l00203}00203\ \ \ \ \ \textcolor{keywordflow}{if}\ (\mbox{\hyperlink{ei__types_8h_a722bfa1a8a9a4202fb2d4abce2f06a8c}{ei\_default\_font}}\ !=\ NULL)\ \{}
\DoxyCodeLine{\Hypertarget{ei__application_8c_source_l00204}00204\ \ \ \ \ \ \ \ \ \mbox{\hyperlink{hw__interface_8h_a2ac46d37db4c40adc10e3afb137f9f02}{hw\_text\_font\_free}}(\mbox{\hyperlink{ei__types_8h_a722bfa1a8a9a4202fb2d4abce2f06a8c}{ei\_default\_font}});}
\DoxyCodeLine{\Hypertarget{ei__application_8c_source_l00205}00205\ \ \ \ \ \ \ \ \ \mbox{\hyperlink{ei__types_8h_a722bfa1a8a9a4202fb2d4abce2f06a8c}{ei\_default\_font}}\ =\ NULL;}
\DoxyCodeLine{\Hypertarget{ei__application_8c_source_l00206}00206\ \ \ \ \ \}}
\DoxyCodeLine{\Hypertarget{ei__application_8c_source_l00207}00207\ \ \ \ \ \mbox{\hyperlink{hw__interface_8h_abe4354544a70c108fe5d8f17c69a2874}{hw\_quit}}();}
\DoxyCodeLine{\Hypertarget{ei__application_8c_source_l00208}00208\ \}}
\DoxyCodeLine{\Hypertarget{ei__application_8c_source_l00209}00209\ }
\DoxyCodeLine{\Hypertarget{ei__application_8c_source_l00210}\mbox{\hyperlink{ei__application_8h_a951633a600dd86ac1f68b1c4b47e5085}{00210}}\ \mbox{\hyperlink{structei__impl__widget__t}{ei\_widget\_t}}\ \mbox{\hyperlink{ei__application_8c_a951633a600dd86ac1f68b1c4b47e5085}{ei\_app\_root\_widget}}(\textcolor{keywordtype}{void})\ \{}
\DoxyCodeLine{\Hypertarget{ei__application_8c_source_l00211}00211\ \ \ \ \ \textcolor{keywordflow}{return}\ \mbox{\hyperlink{ei__application_8c_a927cc0bd7b0f916273c19c13ee945884}{g\_root\_widget}};}
\DoxyCodeLine{\Hypertarget{ei__application_8c_source_l00212}00212\ \}}
\DoxyCodeLine{\Hypertarget{ei__application_8c_source_l00213}00213\ }
\DoxyCodeLine{\Hypertarget{ei__application_8c_source_l00214}\mbox{\hyperlink{ei__application_8h_aa3dba616351b18883ed6e20fd2fcf82e}{00214}}\ \mbox{\hyperlink{hw__interface_8h_ad9970ae727c438faaf09c58c5defb796}{ei\_surface\_t}}\ \mbox{\hyperlink{ei__application_8c_aa3dba616351b18883ed6e20fd2fcf82e}{ei\_app\_root\_surface}}(\textcolor{keywordtype}{void})\ \{}
\DoxyCodeLine{\Hypertarget{ei__application_8c_source_l00215}00215\ \ \ \ \ \textcolor{keywordflow}{return}\ \mbox{\hyperlink{ei__application_8c_af057b3392365e53cef4a502a9545d957}{g\_root\_surface}};}
\DoxyCodeLine{\Hypertarget{ei__application_8c_source_l00216}00216\ \}}
\DoxyCodeLine{\Hypertarget{ei__application_8c_source_l00217}00217\ }
\DoxyCodeLine{\Hypertarget{ei__application_8c_source_l00218}\mbox{\hyperlink{ei__application_8h_a92110923e2f3b88c9e0c5cf5071cf410}{00218}}\ \textcolor{keywordtype}{void}\ \mbox{\hyperlink{ei__application_8c_a92110923e2f3b88c9e0c5cf5071cf410}{ei\_app\_invalidate\_rect}}(\textcolor{keyword}{const}\ \mbox{\hyperlink{structei__rect__t}{ei\_rect\_t}}*\ rect)\ \{}
\DoxyCodeLine{\Hypertarget{ei__application_8c_source_l00219}00219\ \ \ \ \ \textcolor{keywordflow}{if}\ (rect\ ==\ NULL\ ||\ rect-\/>\mbox{\hyperlink{structei__rect__t_a200c48a352d448a24d4f85673f6bad14}{size}}.\mbox{\hyperlink{structei__size__t_a981037618942814a4318a4c27cdaecc1}{width}}\ <=\ 0\ ||\ rect-\/>\mbox{\hyperlink{structei__rect__t_a200c48a352d448a24d4f85673f6bad14}{size}}.\mbox{\hyperlink{structei__size__t_a2f152e26c90d01cac2b337ebc118a5f1}{height}}\ <=\ 0)\ \{}
\DoxyCodeLine{\Hypertarget{ei__application_8c_source_l00220}00220\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return};}
\DoxyCodeLine{\Hypertarget{ei__application_8c_source_l00221}00221\ \ \ \ \ \}}
\DoxyCodeLine{\Hypertarget{ei__application_8c_source_l00222}00222\ }
\DoxyCodeLine{\Hypertarget{ei__application_8c_source_l00223}00223\ \ \ \ \ \mbox{\hyperlink{structei__linked__rect__t}{ei\_linked\_rect\_t}}*\ new\_invalid\_node\ =\ malloc(\textcolor{keyword}{sizeof}(\mbox{\hyperlink{structei__linked__rect__t}{ei\_linked\_rect\_t}}));}
\DoxyCodeLine{\Hypertarget{ei__application_8c_source_l00224}00224\ \ \ \ \ \textcolor{keywordflow}{if}\ (new\_invalid\_node\ ==\ NULL)\ \{}
\DoxyCodeLine{\Hypertarget{ei__application_8c_source_l00225}00225\ \ \ \ \ \ \ \ \ fprintf(stderr,\ \textcolor{stringliteral}{"{}Erreur:\ Impossible\ d'allouer\ de\ la\ mémoire\ pour\ invalidated\_rect.\(\backslash\)n"{}});}
\DoxyCodeLine{\Hypertarget{ei__application_8c_source_l00226}00226\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return};}
\DoxyCodeLine{\Hypertarget{ei__application_8c_source_l00227}00227\ \ \ \ \ \}}
\DoxyCodeLine{\Hypertarget{ei__application_8c_source_l00228}00228\ \ \ \ \ new\_invalid\_node-\/>\mbox{\hyperlink{structei__linked__rect__t_ae7fa184a482756ca81a340de0775cc8b}{rect}}\ =\ *rect;}
\DoxyCodeLine{\Hypertarget{ei__application_8c_source_l00229}00229\ \ \ \ \ new\_invalid\_node-\/>\mbox{\hyperlink{structei__linked__rect__t_ad31a83bb4babee5aaae18ccedad52755}{next}}\ =\ \mbox{\hyperlink{ei__application_8c_a0d6a9fdaa1def766dd715b3c11a363a5}{g\_invalidated\_rects\_head}};\ \textcolor{comment}{//\ Ajout\ en\ tête}}
\DoxyCodeLine{\Hypertarget{ei__application_8c_source_l00230}00230\ \ \ \ \ \mbox{\hyperlink{ei__application_8c_a0d6a9fdaa1def766dd715b3c11a363a5}{g\_invalidated\_rects\_head}}\ =\ new\_invalid\_node;}
\DoxyCodeLine{\Hypertarget{ei__application_8c_source_l00231}00231\ \}}
\DoxyCodeLine{\Hypertarget{ei__application_8c_source_l00232}00232\ }
\DoxyCodeLine{\Hypertarget{ei__application_8c_source_l00233}\mbox{\hyperlink{ei__application_8h_a79e6f7b1484c67f527a840d89ead336f}{00233}}\ \textcolor{keywordtype}{void}\ \mbox{\hyperlink{ei__application_8c_a79e6f7b1484c67f527a840d89ead336f}{ei\_app\_quit\_request}}(\textcolor{keywordtype}{void})\ \{}
\DoxyCodeLine{\Hypertarget{ei__application_8c_source_l00234}00234\ \ \ \ \ \mbox{\hyperlink{ei__application_8c_adf16c7601d0dee7e249df427f279f5fc}{g\_application\_quit\_request}}\ =\ \textcolor{keyword}{true};}
\DoxyCodeLine{\Hypertarget{ei__application_8c_source_l00235}00235\ \}}
\DoxyCodeLine{\Hypertarget{ei__application_8c_source_l00236}00236\ }
\DoxyCodeLine{\Hypertarget{ei__application_8c_source_l00237}00237\ \textcolor{comment}{//\ Fonctions\ pour\ la\ gestion\ du\ focus}}
\DoxyCodeLine{\Hypertarget{ei__application_8c_source_l00238}\mbox{\hyperlink{ei__application_8c_a2eab2592746bf68c2530d17844843eaa}{00238}}\ \textcolor{keywordtype}{void}\ \mbox{\hyperlink{ei__application_8c_a2eab2592746bf68c2530d17844843eaa}{ei\_app\_set\_focus}}(\mbox{\hyperlink{structei__impl__widget__t}{ei\_widget\_t}}\ widget)\ \{}
\DoxyCodeLine{\Hypertarget{ei__application_8c_source_l00239}00239\ \ \ \ \ \textcolor{comment}{//\ Optionnel:\ notifier\ l'ancien\ et\ le\ nouveau\ widget\ du\ changement\ de\ focus}}
\DoxyCodeLine{\Hypertarget{ei__application_8c_source_l00240}00240\ \ \ \ \ \textcolor{comment}{//\ (nécessiterait\ de\ définir\ des\ types\ d'événements\ ei\_ev\_focus/ei\_ev\_unfocus}}
\DoxyCodeLine{\Hypertarget{ei__application_8c_source_l00241}00241\ \ \ \ \ \textcolor{comment}{//\ et\ que\ les\ handlefunc\ des\ widgets\ les\ gèrent\ pour,\ par\ exemple,\ changer\ leur\ apparence)}}
\DoxyCodeLine{\Hypertarget{ei__application_8c_source_l00242}00242\ \ \ \ \ \mbox{\hyperlink{ei__application_8c_abe078f7b5f43c071865e0dcea94d6a4c}{g\_focused\_widget}}\ =\ widget;}
\DoxyCodeLine{\Hypertarget{ei__application_8c_source_l00243}00243\ \}}
\DoxyCodeLine{\Hypertarget{ei__application_8c_source_l00244}00244\ }
\DoxyCodeLine{\Hypertarget{ei__application_8c_source_l00245}\mbox{\hyperlink{ei__application_8c_a1cabe600ee52159a214f6d50c374f138}{00245}}\ \mbox{\hyperlink{structei__impl__widget__t}{ei\_widget\_t}}\ \mbox{\hyperlink{ei__application_8c_a1cabe600ee52159a214f6d50c374f138}{ei\_app\_get\_focus}}(\textcolor{keywordtype}{void})\ \{}
\DoxyCodeLine{\Hypertarget{ei__application_8c_source_l00246}00246\ \ \ \ \ \textcolor{keywordflow}{return}\ \mbox{\hyperlink{ei__application_8c_abe078f7b5f43c071865e0dcea94d6a4c}{g\_focused\_widget}};}
\DoxyCodeLine{\Hypertarget{ei__application_8c_source_l00247}00247\ \}}

\end{DoxyCode}
