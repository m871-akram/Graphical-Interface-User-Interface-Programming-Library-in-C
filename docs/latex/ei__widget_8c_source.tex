\doxysection{ei\+\_\+widget.\+c}
\hypertarget{ei__widget_8c_source}{}\label{ei__widget_8c_source}\index{ei\_widget.c@{ei\_widget.c}}
\mbox{\hyperlink{ei__widget_8c}{Go to the documentation of this file.}}
\begin{DoxyCode}{0}
\DoxyCodeLine{\Hypertarget{ei__widget_8c_source_l00001}00001\ \textcolor{preprocessor}{\#include\ "{}\mbox{\hyperlink{ei__utils_8h}{ei\_utils.h}}"{}}}
\DoxyCodeLine{\Hypertarget{ei__widget_8c_source_l00002}00002\ \textcolor{preprocessor}{\#include\ "{}\mbox{\hyperlink{ei__application_8h}{ei\_application.h}}"{}}}
\DoxyCodeLine{\Hypertarget{ei__widget_8c_source_l00003}00003\ \textcolor{preprocessor}{\#include\ "{}\mbox{\hyperlink{ei__widget_8h}{ei\_widget.h}}"{}}}
\DoxyCodeLine{\Hypertarget{ei__widget_8c_source_l00004}00004\ \textcolor{preprocessor}{\#include\ "{}\mbox{\hyperlink{ei__implementation_8h}{ei\_implementation.h}}"{}}}
\DoxyCodeLine{\Hypertarget{ei__widget_8c_source_l00005}00005\ \textcolor{preprocessor}{\#include\ "{}\mbox{\hyperlink{ei__placer_8h}{ei\_placer.h}}"{}}}
\DoxyCodeLine{\Hypertarget{ei__widget_8c_source_l00006}00006\ \textcolor{preprocessor}{\#include\ "{}\mbox{\hyperlink{ei__widget__attributes_8h}{ei\_widget\_attributes.h}}"{}}\ \textcolor{comment}{//\ Pas\ besoin\ d'inclure\ les\ classes\ spécifiques\ ici}}
\DoxyCodeLine{\Hypertarget{ei__widget_8c_source_l00007}00007\ \textcolor{preprocessor}{\#include\ <stdlib.h>}}
\DoxyCodeLine{\Hypertarget{ei__widget_8c_source_l00008}00008\ \textcolor{preprocessor}{\#include\ <stdio.h>}}
\DoxyCodeLine{\Hypertarget{ei__widget_8c_source_l00009}00009\ }
\DoxyCodeLine{\Hypertarget{ei__widget_8c_source_l00010}00010\ \textcolor{comment}{//\ MODIF:\ Définition\ de\ la\ variable\ globale\ pour\ le\ pick\_id}}
\DoxyCodeLine{\Hypertarget{ei__widget_8c_source_l00011}00011\ \textcolor{comment}{//\ Elle\ devrait\ être\ unique\ pour\ tout\ le\ programme.}}
\DoxyCodeLine{\Hypertarget{ei__widget_8c_source_l00012}00012\ \textcolor{comment}{//\ Mettre\ cette\ définition\ dans\ un\ seul\ .c\ (par\ exemple,\ ei\_application.c\ ou\ ei\_widget.c).}}
\DoxyCodeLine{\Hypertarget{ei__widget_8c_source_l00013}00013\ \textcolor{comment}{//\ Si\ elle\ est\ aussi\ dans\ ei\_widgetclass.c,\ cela\ créera\ un\ conflit\ de\ symboles.}}
\DoxyCodeLine{\Hypertarget{ei__widget_8c_source_l00014}00014\ \textcolor{comment}{//\ Je\ la\ mets\ ici\ pour\ l'instant.\ Assurez-\/vous\ qu'elle\ n'est\ définie\ qu'une\ seule\ fois.}}
\DoxyCodeLine{\Hypertarget{ei__widget_8c_source_l00015}\mbox{\hyperlink{ei__implementation_8h_aa8a1f0139789d3143ef286e0129826fc}{00015}}\ uint32\_t\ \mbox{\hyperlink{ei__widget_8c_aa8a1f0139789d3143ef286e0129826fc}{g\_next\_pick\_id}}\ =\ 1;}
\DoxyCodeLine{\Hypertarget{ei__widget_8c_source_l00016}00016\ }
\DoxyCodeLine{\Hypertarget{ei__widget_8c_source_l00017}00017\ }
\DoxyCodeLine{\Hypertarget{ei__widget_8c_source_l00018}\mbox{\hyperlink{ei__widget_8h_af05d9b442d1c9ac845dc74d64f7f7239}{00018}}\ \mbox{\hyperlink{structei__impl__widget__t}{ei\_widget\_t}}\ \mbox{\hyperlink{ei__widget_8c_af05d9b442d1c9ac845dc74d64f7f7239}{ei\_widget\_create}}(\mbox{\hyperlink{ei__types_8h_a54e9efab809a177e0b5df09529a6d32c}{ei\_const\_string\_t}}\ class\_name,}
\DoxyCodeLine{\Hypertarget{ei__widget_8c_source_l00019}00019\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{structei__impl__widget__t}{ei\_widget\_t}}\ parent,}
\DoxyCodeLine{\Hypertarget{ei__widget_8c_source_l00020}00020\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{ei__types_8h_a851d40b095b5bf6f3b8733f0a09c820b}{ei\_user\_param\_t}}\ user\_data,}
\DoxyCodeLine{\Hypertarget{ei__widget_8c_source_l00021}00021\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{ei__widget_8h_ab58bdc73d94efb5e0cf0a1893eec910b}{ei\_widget\_destructor\_t}}\ destructor)\ \{}
\DoxyCodeLine{\Hypertarget{ei__widget_8c_source_l00022}00022\ \ \ \ \ \mbox{\hyperlink{structei__widgetclass__t}{ei\_widgetclass\_t}}*\ wclass\ =\ \mbox{\hyperlink{ei__widgetclass_8h_a0e893650fc8d717ebe51b629eaf18214}{ei\_widgetclass\_from\_name}}(class\_name);}
\DoxyCodeLine{\Hypertarget{ei__widget_8c_source_l00023}00023\ \ \ \ \ \textcolor{keywordflow}{if}\ (wclass\ ==\ NULL)\ \{}
\DoxyCodeLine{\Hypertarget{ei__widget_8c_source_l00024}00024\ \ \ \ \ \ \ \ \ \textcolor{comment}{//\ fprintf(stderr,\ "{}ei\_widget\_create:\ Unknown\ class\ name\ '\%s'\(\backslash\)n"{},\ class\_name);\ //\ Déjà\ fait\ par\ ei\_widgetclass\_from\_name}}
\DoxyCodeLine{\Hypertarget{ei__widget_8c_source_l00025}00025\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ NULL;}
\DoxyCodeLine{\Hypertarget{ei__widget_8c_source_l00026}00026\ \ \ \ \ \}}
\DoxyCodeLine{\Hypertarget{ei__widget_8c_source_l00027}00027\ \ \ \ \ \textcolor{keywordflow}{if}\ (wclass-\/>\mbox{\hyperlink{structei__widgetclass__t_a233446250cdde4347c1381427923d21a}{allocfunc}}\ ==\ NULL)\ \{}
\DoxyCodeLine{\Hypertarget{ei__widget_8c_source_l00028}00028\ \ \ \ \ \ \ \ \ fprintf(stderr,\ \textcolor{stringliteral}{"{}ei\_widget\_create:\ Class\ '\%s'\ has\ no\ allocfunc\(\backslash\)n"{}},\ class\_name);}
\DoxyCodeLine{\Hypertarget{ei__widget_8c_source_l00029}00029\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ NULL;}
\DoxyCodeLine{\Hypertarget{ei__widget_8c_source_l00030}00030\ \ \ \ \ \}}
\DoxyCodeLine{\Hypertarget{ei__widget_8c_source_l00031}00031\ }
\DoxyCodeLine{\Hypertarget{ei__widget_8c_source_l00032}00032\ \ \ \ \ \mbox{\hyperlink{structei__impl__widget__t}{ei\_impl\_widget\_t}}*\ new\_widget\ =\ (\mbox{\hyperlink{structei__impl__widget__t}{ei\_impl\_widget\_t}}*)wclass-\/>\mbox{\hyperlink{structei__widgetclass__t_a233446250cdde4347c1381427923d21a}{allocfunc}}();\ \textcolor{comment}{//\ Le\ allocfunc\ retourne\ ei\_widget\_t\ (ei\_impl\_widget\_t*)}}
\DoxyCodeLine{\Hypertarget{ei__widget_8c_source_l00033}00033\ \ \ \ \ \textcolor{keywordflow}{if}\ (new\_widget\ ==\ NULL)\ \{}
\DoxyCodeLine{\Hypertarget{ei__widget_8c_source_l00034}00034\ \ \ \ \ \ \ \ \ fprintf(stderr,\ \textcolor{stringliteral}{"{}ei\_widget\_create:\ allocfunc\ for\ class\ '\%s'\ failed\(\backslash\)n"{}},\ class\_name);}
\DoxyCodeLine{\Hypertarget{ei__widget_8c_source_l00035}00035\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ NULL;}
\DoxyCodeLine{\Hypertarget{ei__widget_8c_source_l00036}00036\ \ \ \ \ \}}
\DoxyCodeLine{\Hypertarget{ei__widget_8c_source_l00037}00037\ }
\DoxyCodeLine{\Hypertarget{ei__widget_8c_source_l00038}00038\ \ \ \ \ \textcolor{comment}{//\ Initialisation\ des\ champs\ communs\ de\ ei\_impl\_widget\_t}}
\DoxyCodeLine{\Hypertarget{ei__widget_8c_source_l00039}00039\ \ \ \ \ new\_widget-\/>\mbox{\hyperlink{structei__impl__widget__t_aa6ab44d2da83877b1d83e1a6cea7034e}{wclass}}\ =\ wclass;}
\DoxyCodeLine{\Hypertarget{ei__widget_8c_source_l00040}00040\ \ \ \ \ new\_widget-\/>\mbox{\hyperlink{structei__impl__widget__t_a8499862f1cf40cd99b52f1f38a32e9b0}{parent}}\ =\ parent;}
\DoxyCodeLine{\Hypertarget{ei__widget_8c_source_l00041}00041\ \ \ \ \ new\_widget-\/>\mbox{\hyperlink{structei__impl__widget__t_a9d5ac25df3e41158391c837c1a77d238}{user\_data}}\ =\ user\_data;}
\DoxyCodeLine{\Hypertarget{ei__widget_8c_source_l00042}00042\ \ \ \ \ new\_widget-\/>\mbox{\hyperlink{structei__impl__widget__t_aa24362f2cceb4c2e02a16c34cf045918}{destructor}}\ =\ destructor;}
\DoxyCodeLine{\Hypertarget{ei__widget_8c_source_l00043}00043\ }
\DoxyCodeLine{\Hypertarget{ei__widget_8c_source_l00044}00044\ \ \ \ \ new\_widget-\/>\mbox{\hyperlink{structei__impl__widget__t_ae9085b15b51f1a55434df1dbe68c034e}{pick\_id}}\ =\ \mbox{\hyperlink{ei__widget_8c_aa8a1f0139789d3143ef286e0129826fc}{g\_next\_pick\_id}}++;}
\DoxyCodeLine{\Hypertarget{ei__widget_8c_source_l00045}00045\ \ \ \ \ \textcolor{comment}{//\ Convertir\ pick\_id\ en\ pick\_color}}
\DoxyCodeLine{\Hypertarget{ei__widget_8c_source_l00046}00046\ \ \ \ \ \textcolor{comment}{//\ L'ordre\ R,G,B\ est\ arbitraire\ ici,\ mais\ doit\ être\ cohérent\ avec\ la\ lecture\ dans\ ei\_widget\_pick}}
\DoxyCodeLine{\Hypertarget{ei__widget_8c_source_l00047}00047\ \ \ \ \ new\_widget-\/>\mbox{\hyperlink{structei__impl__widget__t_a0f0f3a719755e6e9ad65cc69aa1e0c76}{pick\_color}}.\mbox{\hyperlink{structei__color__t_a9adf283c79176b3426ac63784f0bc17b}{red}}\ \ \ =\ (uint8\_t)((new\_widget-\/>\mbox{\hyperlink{structei__impl__widget__t_ae9085b15b51f1a55434df1dbe68c034e}{pick\_id}}\ \&\ 0x00FF0000)\ >>\ 16);}
\DoxyCodeLine{\Hypertarget{ei__widget_8c_source_l00048}00048\ \ \ \ \ new\_widget-\/>\mbox{\hyperlink{structei__impl__widget__t_a0f0f3a719755e6e9ad65cc69aa1e0c76}{pick\_color}}.\mbox{\hyperlink{structei__color__t_ad85ce262fb9c76fe3c52b4eed19505d1}{green}}\ =\ (uint8\_t)((new\_widget-\/>\mbox{\hyperlink{structei__impl__widget__t_ae9085b15b51f1a55434df1dbe68c034e}{pick\_id}}\ \&\ 0x0000FF00)\ >>\ 8);}
\DoxyCodeLine{\Hypertarget{ei__widget_8c_source_l00049}00049\ \ \ \ \ new\_widget-\/>\mbox{\hyperlink{structei__impl__widget__t_a0f0f3a719755e6e9ad65cc69aa1e0c76}{pick\_color}}.\mbox{\hyperlink{structei__color__t_af8d67b7a72cbb586519b55033350fb8c}{blue}}\ \ =\ (uint8\_t)((new\_widget-\/>\mbox{\hyperlink{structei__impl__widget__t_ae9085b15b51f1a55434df1dbe68c034e}{pick\_id}}\ \&\ 0x000000FF));}
\DoxyCodeLine{\Hypertarget{ei__widget_8c_source_l00050}00050\ \ \ \ \ new\_widget-\/>\mbox{\hyperlink{structei__impl__widget__t_a0f0f3a719755e6e9ad65cc69aa1e0c76}{pick\_color}}.\mbox{\hyperlink{structei__color__t_af213a14356db920b1a04f5270263ae61}{alpha}}\ =\ 0xff;\ \textcolor{comment}{//\ Opaque\ pour\ le\ picking}}
\DoxyCodeLine{\Hypertarget{ei__widget_8c_source_l00051}00051\ }
\DoxyCodeLine{\Hypertarget{ei__widget_8c_source_l00052}00052\ \ \ \ \ new\_widget-\/>\mbox{\hyperlink{structei__impl__widget__t_aa4a6383448c3e9bee6a8b0bc2ae15dc9}{children\_head}}\ =\ NULL;}
\DoxyCodeLine{\Hypertarget{ei__widget_8c_source_l00053}00053\ \ \ \ \ new\_widget-\/>\mbox{\hyperlink{structei__impl__widget__t_adcc97671062f66aa993487f6816c81ef}{children\_tail}}\ =\ NULL;}
\DoxyCodeLine{\Hypertarget{ei__widget_8c_source_l00054}00054\ \ \ \ \ new\_widget-\/>\mbox{\hyperlink{structei__impl__widget__t_a638762e72c295c58b34c50c5b11425ae}{next\_sibling}}\ =\ NULL;}
\DoxyCodeLine{\Hypertarget{ei__widget_8c_source_l00055}00055\ \ \ \ \ new\_widget-\/>\mbox{\hyperlink{structei__impl__widget__t_aad1c98bc7b84cb318801e78df23f9cf9}{placer\_params}}\ =\ NULL;}
\DoxyCodeLine{\Hypertarget{ei__widget_8c_source_l00056}00056\ \ \ \ \ new\_widget-\/>\mbox{\hyperlink{structei__impl__widget__t_a4917a94e71d8fe03d8cf3b2b90953e5f}{screen\_location}}\ =\ \mbox{\hyperlink{ei__utils_8h_a8bef8234db026386d82fb016cf7d67dc}{ei\_rect\_zero}}();}
\DoxyCodeLine{\Hypertarget{ei__widget_8c_source_l00057}00057\ \ \ \ \ \textcolor{comment}{//\ MODIF:\ Par\ défaut,\ content\_rect\ pointe\ vers\ screen\_location.}}
\DoxyCodeLine{\Hypertarget{ei__widget_8c_source_l00058}00058\ \ \ \ \ \textcolor{comment}{//\ Les\ classes\ qui\ ont\ des\ bordures\ (frame,\ button,\ toplevel)\ devront}}
\DoxyCodeLine{\Hypertarget{ei__widget_8c_source_l00059}00059\ \ \ \ \ \textcolor{comment}{//\ allouer\ un\ ei\_rect\_t\ séparé\ pour\ leur\ content\_rect\ et\ le\ calculer\ dans\ leur\ drawfunc\ ou\ geomnotifyfunc.}}
\DoxyCodeLine{\Hypertarget{ei__widget_8c_source_l00060}00060\ \ \ \ \ \textcolor{comment}{//\ Ou,\ plus\ simple,\ on\ a\ un\ champ\ ei\_rect\_t\ content\_rect\_value\ et\ content\_rect\ pointe\ dessus.}}
\DoxyCodeLine{\Hypertarget{ei__widget_8c_source_l00061}00061\ \ \ \ \ \textcolor{comment}{//\ Pour\ la\ plus\ grande\ simplicité\ au\ début,\ content\_rect\ pointe\ vers\ screen\_location.}}
\DoxyCodeLine{\Hypertarget{ei__widget_8c_source_l00062}00062\ \ \ \ \ \textcolor{comment}{//\ Les\ drawfuncs\ des\ classes\ devront\ calculer\ le\ vrai\ content\ area\ si\ besoin\ (screen\_loc\ -\/\ borders).}}
\DoxyCodeLine{\Hypertarget{ei__widget_8c_source_l00063}00063\ \ \ \ \ new\_widget-\/>\mbox{\hyperlink{structei__impl__widget__t_a55bc37d2f8f790d2882c71d9bd198127}{content\_rect}}\ =\ \&(new\_widget-\/>\mbox{\hyperlink{structei__impl__widget__t_a4917a94e71d8fe03d8cf3b2b90953e5f}{screen\_location}});}
\DoxyCodeLine{\Hypertarget{ei__widget_8c_source_l00064}00064\ }
\DoxyCodeLine{\Hypertarget{ei__widget_8c_source_l00065}00065\ \ \ \ \ \textcolor{comment}{//\ AJOUT:\ Initialisation\ des\ champs\ texte/image\ (communs)}}
\DoxyCodeLine{\Hypertarget{ei__widget_8c_source_l00066}00066\ \ \ \ \ new\_widget-\/>\mbox{\hyperlink{structei__impl__widget__t_aaabb0a898eaf01aef4c0a80c8ed66f4a}{text}}\ =\ NULL;}
\DoxyCodeLine{\Hypertarget{ei__widget_8c_source_l00067}00067\ \ \ \ \ new\_widget-\/>\mbox{\hyperlink{structei__impl__widget__t_acaf4f5a2151f73f97c491dc420d0e168}{text\_font}}\ =\ \mbox{\hyperlink{ei__types_8h_a722bfa1a8a9a4202fb2d4abce2f06a8c}{ei\_default\_font}};\ \textcolor{comment}{//\ Utiliser\ la\ police\ globale\ par\ défaut}}
\DoxyCodeLine{\Hypertarget{ei__widget_8c_source_l00068}00068\ \ \ \ \ new\_widget-\/>\mbox{\hyperlink{structei__impl__widget__t_aed9fd9ef6da2d00a547c7c2c5c4ce2bf}{text\_color}}\ =\ \mbox{\hyperlink{ei__types_8h_adc5dd1241a145ff097f2c01dd6ab13af}{ei\_font\_default\_color}};}
\DoxyCodeLine{\Hypertarget{ei__widget_8c_source_l00069}00069\ \ \ \ \ new\_widget-\/>\mbox{\hyperlink{structei__impl__widget__t_a7ff035c82ad973064546f0fb5b4c2642}{text\_anchor}}\ =\ \mbox{\hyperlink{ei__types_8h_a3852c963af609d31d7cfcff79c4c8450a5704b2469014b3e93fbdb0b297ed92b0}{ei\_anc\_center}};}
\DoxyCodeLine{\Hypertarget{ei__widget_8c_source_l00070}00070\ \ \ \ \ new\_widget-\/>\mbox{\hyperlink{structei__impl__widget__t_ab1ca6d414c8b7e25e3aa17c257fe5c83}{img}}\ =\ NULL;}
\DoxyCodeLine{\Hypertarget{ei__widget_8c_source_l00071}00071\ \ \ \ \ new\_widget-\/>\mbox{\hyperlink{structei__impl__widget__t_a80d318ccd2d7a7e1dd75fdfc8ef49ffc}{img\_rect\_ptr}}\ =\ NULL;}
\DoxyCodeLine{\Hypertarget{ei__widget_8c_source_l00072}00072\ \ \ \ \ \textcolor{comment}{//\ new\_widget-\/>img\_rect\_val\ est\ déjà\ initialisé\ à\ 0\ par\ calloc}}
\DoxyCodeLine{\Hypertarget{ei__widget_8c_source_l00073}00073\ \ \ \ \ new\_widget-\/>\mbox{\hyperlink{structei__impl__widget__t_a029c66afc751e2166915e82f765dffd6}{img\_anchor}}\ =\ \mbox{\hyperlink{ei__types_8h_a3852c963af609d31d7cfcff79c4c8450a5704b2469014b3e93fbdb0b297ed92b0}{ei\_anc\_center}};}
\DoxyCodeLine{\Hypertarget{ei__widget_8c_source_l00074}00074\ }
\DoxyCodeLine{\Hypertarget{ei__widget_8c_source_l00075}00075\ }
\DoxyCodeLine{\Hypertarget{ei__widget_8c_source_l00076}00076\ \ \ \ \ \textcolor{comment}{//\ Ajouter\ à\ la\ hiérarchie\ des\ enfants\ du\ parent\ (sauf\ si\ parent\ est\ NULL,\ ce\ qui\ est\ pour\ le\ root)}}
\DoxyCodeLine{\Hypertarget{ei__widget_8c_source_l00077}00077\ \ \ \ \ \textcolor{keywordflow}{if}\ (parent\ !=\ NULL)\ \{}
\DoxyCodeLine{\Hypertarget{ei__widget_8c_source_l00078}00078\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (parent-\/>\mbox{\hyperlink{structei__impl__widget__t_aa4a6383448c3e9bee6a8b0bc2ae15dc9}{children\_head}}\ ==\ NULL)\ \{}
\DoxyCodeLine{\Hypertarget{ei__widget_8c_source_l00079}00079\ \ \ \ \ \ \ \ \ \ \ \ \ parent-\/>\mbox{\hyperlink{structei__impl__widget__t_aa4a6383448c3e9bee6a8b0bc2ae15dc9}{children\_head}}\ =\ new\_widget;}
\DoxyCodeLine{\Hypertarget{ei__widget_8c_source_l00080}00080\ \ \ \ \ \ \ \ \ \}\ \textcolor{keywordflow}{else}\ \{}
\DoxyCodeLine{\Hypertarget{ei__widget_8c_source_l00081}00081\ \ \ \ \ \ \ \ \ \ \ \ \ parent-\/>\mbox{\hyperlink{structei__impl__widget__t_adcc97671062f66aa993487f6816c81ef}{children\_tail}}-\/>\mbox{\hyperlink{structei__impl__widget__t_a638762e72c295c58b34c50c5b11425ae}{next\_sibling}}\ =\ new\_widget;}
\DoxyCodeLine{\Hypertarget{ei__widget_8c_source_l00082}00082\ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{\Hypertarget{ei__widget_8c_source_l00083}00083\ \ \ \ \ \ \ \ \ parent-\/>\mbox{\hyperlink{structei__impl__widget__t_adcc97671062f66aa993487f6816c81ef}{children\_tail}}\ =\ new\_widget;\ \textcolor{comment}{//\ new\_widget\ est\ toujours\ le\ dernier\ ajouté}}
\DoxyCodeLine{\Hypertarget{ei__widget_8c_source_l00084}00084\ \ \ \ \ \ \ \ \ new\_widget-\/>\mbox{\hyperlink{structei__impl__widget__t_a638762e72c295c58b34c50c5b11425ae}{next\_sibling}}\ =\ NULL;\ \textcolor{comment}{//\ Le\ dernier\ enfant\ n'a\ pas\ de\ suivant}}
\DoxyCodeLine{\Hypertarget{ei__widget_8c_source_l00085}00085\ \ \ \ \ \}}
\DoxyCodeLine{\Hypertarget{ei__widget_8c_source_l00086}00086\ }
\DoxyCodeLine{\Hypertarget{ei__widget_8c_source_l00087}00087\ \ \ \ \ \textcolor{comment}{//\ Appeler\ setdefaultsfunc}}
\DoxyCodeLine{\Hypertarget{ei__widget_8c_source_l00088}00088\ \ \ \ \ \textcolor{keywordflow}{if}\ (wclass-\/>\mbox{\hyperlink{structei__widgetclass__t_a5fec706eefca10172d897cf61b268510}{setdefaultsfunc}}\ !=\ NULL)\ \{}
\DoxyCodeLine{\Hypertarget{ei__widget_8c_source_l00089}00089\ \ \ \ \ \ \ \ \ wclass-\/>\mbox{\hyperlink{structei__widgetclass__t_a5fec706eefca10172d897cf61b268510}{setdefaultsfunc}}(new\_widget);}
\DoxyCodeLine{\Hypertarget{ei__widget_8c_source_l00090}00090\ \ \ \ \ \}\ \textcolor{keywordflow}{else}\ \{}
\DoxyCodeLine{\Hypertarget{ei__widget_8c_source_l00091}00091\ \ \ \ \ \ \ \ \ \textcolor{comment}{//fprintf(stderr,\ "{}Warning:\ Class\ '\%s'\ has\ no\ setdefaultsfunc.\(\backslash\)n"{},\ class\_name);\ //\ Peut\ être\ bruyant}}
\DoxyCodeLine{\Hypertarget{ei__widget_8c_source_l00092}00092\ \ \ \ \ \}}
\DoxyCodeLine{\Hypertarget{ei__widget_8c_source_l00093}00093\ }
\DoxyCodeLine{\Hypertarget{ei__widget_8c_source_l00094}00094\ \ \ \ \ \textcolor{keywordflow}{return}\ new\_widget;}
\DoxyCodeLine{\Hypertarget{ei__widget_8c_source_l00095}00095\ \}}
\DoxyCodeLine{\Hypertarget{ei__widget_8c_source_l00096}00096\ }
\DoxyCodeLine{\Hypertarget{ei__widget_8c_source_l00097}\mbox{\hyperlink{ei__widget_8h_aedbe2a89b8e68342362710a55ee1858b}{00097}}\ \textcolor{keywordtype}{void}\ \mbox{\hyperlink{ei__widget_8c_aedbe2a89b8e68342362710a55ee1858b}{ei\_widget\_destroy}}(\mbox{\hyperlink{structei__impl__widget__t}{ei\_widget\_t}}\ widget)\ \{}
\DoxyCodeLine{\Hypertarget{ei__widget_8c_source_l00098}00098\ \ \ \ \ \textcolor{keywordflow}{if}\ (widget\ ==\ NULL)\ \textcolor{keywordflow}{return};}
\DoxyCodeLine{\Hypertarget{ei__widget_8c_source_l00099}00099\ }
\DoxyCodeLine{\Hypertarget{ei__widget_8c_source_l00100}00100\ \ \ \ \ \textcolor{comment}{//\ 0.\ Retirer\ de\ la\ liste\ des\ enfants\ de\ son\ parent}}
\DoxyCodeLine{\Hypertarget{ei__widget_8c_source_l00101}00101\ \ \ \ \ \textcolor{keywordflow}{if}\ (widget-\/>\mbox{\hyperlink{structei__impl__widget__t_a8499862f1cf40cd99b52f1f38a32e9b0}{parent}}\ !=\ NULL)\ \{}
\DoxyCodeLine{\Hypertarget{ei__widget_8c_source_l00102}00102\ \ \ \ \ \ \ \ \ \mbox{\hyperlink{structei__impl__widget__t}{ei\_impl\_widget\_t}}*\ parent\_impl\ =\ (\mbox{\hyperlink{structei__impl__widget__t}{ei\_impl\_widget\_t}}*)widget-\/>\mbox{\hyperlink{structei__impl__widget__t_a8499862f1cf40cd99b52f1f38a32e9b0}{parent}};}
\DoxyCodeLine{\Hypertarget{ei__widget_8c_source_l00103}00103\ \ \ \ \ \ \ \ \ \mbox{\hyperlink{structei__impl__widget__t}{ei\_impl\_widget\_t}}*\ prev\_sibling\ =\ NULL;}
\DoxyCodeLine{\Hypertarget{ei__widget_8c_source_l00104}00104\ \ \ \ \ \ \ \ \ \mbox{\hyperlink{structei__impl__widget__t}{ei\_impl\_widget\_t}}*\ current\_sibling\ =\ (\mbox{\hyperlink{structei__impl__widget__t}{ei\_impl\_widget\_t}}*)parent\_impl-\/>\mbox{\hyperlink{structei__impl__widget__t_aa4a6383448c3e9bee6a8b0bc2ae15dc9}{children\_head}};}
\DoxyCodeLine{\Hypertarget{ei__widget_8c_source_l00105}00105\ }
\DoxyCodeLine{\Hypertarget{ei__widget_8c_source_l00106}00106\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{while}\ (current\_sibling\ !=\ NULL\ \&\&\ current\_sibling\ !=\ widget)\ \{}
\DoxyCodeLine{\Hypertarget{ei__widget_8c_source_l00107}00107\ \ \ \ \ \ \ \ \ \ \ \ \ prev\_sibling\ =\ current\_sibling;}
\DoxyCodeLine{\Hypertarget{ei__widget_8c_source_l00108}00108\ \ \ \ \ \ \ \ \ \ \ \ \ current\_sibling\ =\ (\mbox{\hyperlink{structei__impl__widget__t}{ei\_impl\_widget\_t}}*)current\_sibling-\/>\mbox{\hyperlink{structei__impl__widget__t_a638762e72c295c58b34c50c5b11425ae}{next\_sibling}};}
\DoxyCodeLine{\Hypertarget{ei__widget_8c_source_l00109}00109\ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{\Hypertarget{ei__widget_8c_source_l00110}00110\ }
\DoxyCodeLine{\Hypertarget{ei__widget_8c_source_l00111}00111\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (current\_sibling\ ==\ widget)\ \{\ \textcolor{comment}{//\ Si\ on\ l'a\ trouvé}}
\DoxyCodeLine{\Hypertarget{ei__widget_8c_source_l00112}00112\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (prev\_sibling\ ==\ NULL)\ \{\ \textcolor{comment}{//\ C'est\ la\ tête\ de\ liste}}
\DoxyCodeLine{\Hypertarget{ei__widget_8c_source_l00113}00113\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ parent\_impl-\/>\mbox{\hyperlink{structei__impl__widget__t_aa4a6383448c3e9bee6a8b0bc2ae15dc9}{children\_head}}\ =\ widget-\/>\mbox{\hyperlink{structei__impl__widget__t_a638762e72c295c58b34c50c5b11425ae}{next\_sibling}};}
\DoxyCodeLine{\Hypertarget{ei__widget_8c_source_l00114}00114\ \ \ \ \ \ \ \ \ \ \ \ \ \}\ \textcolor{keywordflow}{else}\ \{\ \textcolor{comment}{//\ Ce\ n'est\ pas\ la\ tête}}
\DoxyCodeLine{\Hypertarget{ei__widget_8c_source_l00115}00115\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ prev\_sibling-\/>\mbox{\hyperlink{structei__impl__widget__t_a638762e72c295c58b34c50c5b11425ae}{next\_sibling}}\ =\ widget-\/>\mbox{\hyperlink{structei__impl__widget__t_a638762e72c295c58b34c50c5b11425ae}{next\_sibling}};}
\DoxyCodeLine{\Hypertarget{ei__widget_8c_source_l00116}00116\ \ \ \ \ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{\Hypertarget{ei__widget_8c_source_l00117}00117\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{comment}{//\ Mettre\ à\ jour\ la\ queue\ si\ le\ widget\ détruit\ était\ la\ queue}}
\DoxyCodeLine{\Hypertarget{ei__widget_8c_source_l00118}00118\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (parent\_impl-\/>\mbox{\hyperlink{structei__impl__widget__t_adcc97671062f66aa993487f6816c81ef}{children\_tail}}\ ==\ widget)\ \{}
\DoxyCodeLine{\Hypertarget{ei__widget_8c_source_l00119}00119\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ parent\_impl-\/>\mbox{\hyperlink{structei__impl__widget__t_adcc97671062f66aa993487f6816c81ef}{children\_tail}}\ =\ prev\_sibling;\ \textcolor{comment}{//\ Si\ prev\_sibling\ est\ NULL,\ tail\ devient\ NULL\ (cas\ du\ seul\ enfant)}}
\DoxyCodeLine{\Hypertarget{ei__widget_8c_source_l00120}00120\ \ \ \ \ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{\Hypertarget{ei__widget_8c_source_l00121}00121\ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{\Hypertarget{ei__widget_8c_source_l00122}00122\ \ \ \ \ \}}
\DoxyCodeLine{\Hypertarget{ei__widget_8c_source_l00123}00123\ }
\DoxyCodeLine{\Hypertarget{ei__widget_8c_source_l00124}00124\ \ \ \ \ \textcolor{comment}{//\ 1.\ Retirer\ de\ l'écran\ (si\ géré\ par\ un\ placeur)}}
\DoxyCodeLine{\Hypertarget{ei__widget_8c_source_l00125}00125\ \ \ \ \ \textcolor{comment}{//\ ...\ (le\ reste\ de\ votre\ fonction\ ei\_widget\_destroy)\ ...}}
\DoxyCodeLine{\Hypertarget{ei__widget_8c_source_l00126}00126\ \}}
\DoxyCodeLine{\Hypertarget{ei__widget_8c_source_l00127}00127\ }
\DoxyCodeLine{\Hypertarget{ei__widget_8c_source_l00128}00128\ }
\DoxyCodeLine{\Hypertarget{ei__widget_8c_source_l00129}00129\ \textcolor{comment}{//\ Fonction\ auxiliaire\ pour\ dessiner\ les\ enfants}}
\DoxyCodeLine{\Hypertarget{ei__widget_8c_source_l00130}\mbox{\hyperlink{ei__implementation_8h_a857f4be2cbfb1be5aed407cc001ccccb}{00130}}\ \textcolor{keywordtype}{void}\ \mbox{\hyperlink{ei__widget_8c_a857f4be2cbfb1be5aed407cc001ccccb}{ei\_impl\_widget\_draw\_children}}(\mbox{\hyperlink{structei__impl__widget__t}{ei\_widget\_t}}\ widget,}
\DoxyCodeLine{\Hypertarget{ei__widget_8c_source_l00131}00131\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{hw__interface_8h_ad9970ae727c438faaf09c58c5defb796}{ei\_surface\_t}}\ surface,}
\DoxyCodeLine{\Hypertarget{ei__widget_8c_source_l00132}00132\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{hw__interface_8h_ad9970ae727c438faaf09c58c5defb796}{ei\_surface\_t}}\ pick\_surface,}
\DoxyCodeLine{\Hypertarget{ei__widget_8c_source_l00133}00133\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{structei__rect__t}{ei\_rect\_t}}*\ clipper)\ \{}
\DoxyCodeLine{\Hypertarget{ei__widget_8c_source_l00134}00134\ \ \ \ \ \textcolor{keywordflow}{if}\ (widget\ ==\ NULL)\ \textcolor{keywordflow}{return};}
\DoxyCodeLine{\Hypertarget{ei__widget_8c_source_l00135}00135\ }
\DoxyCodeLine{\Hypertarget{ei__widget_8c_source_l00136}00136\ \ \ \ \ \mbox{\hyperlink{structei__impl__widget__t}{ei\_widget\_t}}\ current\_child\ =\ widget-\/>\mbox{\hyperlink{structei__impl__widget__t_aa4a6383448c3e9bee6a8b0bc2ae15dc9}{children\_head}};}
\DoxyCodeLine{\Hypertarget{ei__widget_8c_source_l00137}00137\ \ \ \ \ \mbox{\hyperlink{structei__rect__t}{ei\_rect\_t}}\ child\_clipper;\ \textcolor{comment}{//\ Le\ clipper\ pour\ les\ enfants}}
\DoxyCodeLine{\Hypertarget{ei__widget_8c_source_l00138}00138\ }
\DoxyCodeLine{\Hypertarget{ei__widget_8c_source_l00139}00139\ \ \ \ \ \textcolor{comment}{//\ Le\ clipper\ pour\ les\ enfants\ est\ l'intersection\ du\ clipper\ actuel}}
\DoxyCodeLine{\Hypertarget{ei__widget_8c_source_l00140}00140\ \ \ \ \ \textcolor{comment}{//\ et\ du\ content\_rect\ du\ widget\ parent.}}
\DoxyCodeLine{\Hypertarget{ei__widget_8c_source_l00141}00141\ \ \ \ \ \textcolor{comment}{//\ Le\ content\_rect\ est\ déjà\ exprimé\ en\ coordonnées\ globales\ (écran).}}
\DoxyCodeLine{\Hypertarget{ei__widget_8c_source_l00142}00142\ \ \ \ \ \textcolor{keyword}{const}\ \mbox{\hyperlink{structei__rect__t}{ei\_rect\_t}}*\ parent\_content\_rect\ =\ \mbox{\hyperlink{ei__widget__attributes_8h_a1f395ad04c0e967e2746bfebc5cf6f79}{ei\_widget\_get\_content\_rect}}(widget);}
\DoxyCodeLine{\Hypertarget{ei__widget_8c_source_l00143}00143\ }
\DoxyCodeLine{\Hypertarget{ei__widget_8c_source_l00144}00144\ \ \ \ \ \textcolor{keywordflow}{if}\ (clipper\ ==\ NULL)\ \{\ \textcolor{comment}{//\ Si\ pas\ de\ clipper\ externe,\ on\ utilise\ le\ content\_rect\ du\ parent}}
\DoxyCodeLine{\Hypertarget{ei__widget_8c_source_l00145}00145\ \ \ \ \ \ \ \ \ child\_clipper\ =\ *parent\_content\_rect;}
\DoxyCodeLine{\Hypertarget{ei__widget_8c_source_l00146}00146\ \ \ \ \ \}\ \textcolor{keywordflow}{else}\ \{}
\DoxyCodeLine{\Hypertarget{ei__widget_8c_source_l00147}00147\ \ \ \ \ \ \ \ \ \textcolor{comment}{//\ Calcul\ de\ l'intersection\ entre\ clipper\ et\ parent\_content\_rect}}
\DoxyCodeLine{\Hypertarget{ei__widget_8c_source_l00148}00148\ \ \ \ \ \ \ \ \ child\_clipper.\mbox{\hyperlink{structei__rect__t_aabe78780aa971b9cb9742ed59a2e9438}{top\_left}}.\mbox{\hyperlink{structei__point__t_a6ec4a8846bae4b9694506dae039047b3}{x}}\ =\ (clipper-\/>\mbox{\hyperlink{structei__rect__t_aabe78780aa971b9cb9742ed59a2e9438}{top\_left}}.\mbox{\hyperlink{structei__point__t_a6ec4a8846bae4b9694506dae039047b3}{x}}\ >\ parent\_content\_rect-\/>\mbox{\hyperlink{structei__rect__t_aabe78780aa971b9cb9742ed59a2e9438}{top\_left}}.\mbox{\hyperlink{structei__point__t_a6ec4a8846bae4b9694506dae039047b3}{x}})\ ?\ clipper-\/>\mbox{\hyperlink{structei__rect__t_aabe78780aa971b9cb9742ed59a2e9438}{top\_left}}.\mbox{\hyperlink{structei__point__t_a6ec4a8846bae4b9694506dae039047b3}{x}}\ :\ parent\_content\_rect-\/>\mbox{\hyperlink{structei__rect__t_aabe78780aa971b9cb9742ed59a2e9438}{top\_left}}.\mbox{\hyperlink{structei__point__t_a6ec4a8846bae4b9694506dae039047b3}{x}};}
\DoxyCodeLine{\Hypertarget{ei__widget_8c_source_l00149}00149\ \ \ \ \ \ \ \ \ child\_clipper.\mbox{\hyperlink{structei__rect__t_aabe78780aa971b9cb9742ed59a2e9438}{top\_left}}.\mbox{\hyperlink{structei__point__t_a0c0f1bfa95c372595c52522877f556a0}{y}}\ =\ (clipper-\/>\mbox{\hyperlink{structei__rect__t_aabe78780aa971b9cb9742ed59a2e9438}{top\_left}}.\mbox{\hyperlink{structei__point__t_a0c0f1bfa95c372595c52522877f556a0}{y}}\ >\ parent\_content\_rect-\/>\mbox{\hyperlink{structei__rect__t_aabe78780aa971b9cb9742ed59a2e9438}{top\_left}}.\mbox{\hyperlink{structei__point__t_a0c0f1bfa95c372595c52522877f556a0}{y}})\ ?\ clipper-\/>\mbox{\hyperlink{structei__rect__t_aabe78780aa971b9cb9742ed59a2e9438}{top\_left}}.\mbox{\hyperlink{structei__point__t_a0c0f1bfa95c372595c52522877f556a0}{y}}\ :\ parent\_content\_rect-\/>\mbox{\hyperlink{structei__rect__t_aabe78780aa971b9cb9742ed59a2e9438}{top\_left}}.\mbox{\hyperlink{structei__point__t_a0c0f1bfa95c372595c52522877f556a0}{y}};}
\DoxyCodeLine{\Hypertarget{ei__widget_8c_source_l00150}00150\ }
\DoxyCodeLine{\Hypertarget{ei__widget_8c_source_l00151}00151\ \ \ \ \ \ \ \ \ \textcolor{keywordtype}{int}\ clipper\_right\ =\ clipper-\/>\mbox{\hyperlink{structei__rect__t_aabe78780aa971b9cb9742ed59a2e9438}{top\_left}}.\mbox{\hyperlink{structei__point__t_a6ec4a8846bae4b9694506dae039047b3}{x}}\ +\ clipper-\/>\mbox{\hyperlink{structei__rect__t_a200c48a352d448a24d4f85673f6bad14}{size}}.\mbox{\hyperlink{structei__size__t_a981037618942814a4318a4c27cdaecc1}{width}};}
\DoxyCodeLine{\Hypertarget{ei__widget_8c_source_l00152}00152\ \ \ \ \ \ \ \ \ \textcolor{keywordtype}{int}\ parent\_content\_right\ =\ parent\_content\_rect-\/>\mbox{\hyperlink{structei__rect__t_aabe78780aa971b9cb9742ed59a2e9438}{top\_left}}.\mbox{\hyperlink{structei__point__t_a6ec4a8846bae4b9694506dae039047b3}{x}}\ +\ parent\_content\_rect-\/>\mbox{\hyperlink{structei__rect__t_a200c48a352d448a24d4f85673f6bad14}{size}}.\mbox{\hyperlink{structei__size__t_a981037618942814a4318a4c27cdaecc1}{width}};}
\DoxyCodeLine{\Hypertarget{ei__widget_8c_source_l00153}00153\ \ \ \ \ \ \ \ \ child\_clipper.\mbox{\hyperlink{structei__rect__t_a200c48a352d448a24d4f85673f6bad14}{size}}.\mbox{\hyperlink{structei__size__t_a981037618942814a4318a4c27cdaecc1}{width}}\ =\ ((clipper\_right\ <\ parent\_content\_right)\ ?\ clipper\_right\ :\ parent\_content\_right)\ -\/\ child\_clipper.\mbox{\hyperlink{structei__rect__t_aabe78780aa971b9cb9742ed59a2e9438}{top\_left}}.\mbox{\hyperlink{structei__point__t_a6ec4a8846bae4b9694506dae039047b3}{x}};}
\DoxyCodeLine{\Hypertarget{ei__widget_8c_source_l00154}00154\ }
\DoxyCodeLine{\Hypertarget{ei__widget_8c_source_l00155}00155\ \ \ \ \ \ \ \ \ \textcolor{keywordtype}{int}\ clipper\_bottom\ =\ clipper-\/>\mbox{\hyperlink{structei__rect__t_aabe78780aa971b9cb9742ed59a2e9438}{top\_left}}.\mbox{\hyperlink{structei__point__t_a0c0f1bfa95c372595c52522877f556a0}{y}}\ +\ clipper-\/>\mbox{\hyperlink{structei__rect__t_a200c48a352d448a24d4f85673f6bad14}{size}}.\mbox{\hyperlink{structei__size__t_a2f152e26c90d01cac2b337ebc118a5f1}{height}};}
\DoxyCodeLine{\Hypertarget{ei__widget_8c_source_l00156}00156\ \ \ \ \ \ \ \ \ \textcolor{keywordtype}{int}\ parent\_content\_bottom\ =\ parent\_content\_rect-\/>\mbox{\hyperlink{structei__rect__t_aabe78780aa971b9cb9742ed59a2e9438}{top\_left}}.\mbox{\hyperlink{structei__point__t_a0c0f1bfa95c372595c52522877f556a0}{y}}\ +\ parent\_content\_rect-\/>\mbox{\hyperlink{structei__rect__t_a200c48a352d448a24d4f85673f6bad14}{size}}.\mbox{\hyperlink{structei__size__t_a2f152e26c90d01cac2b337ebc118a5f1}{height}};}
\DoxyCodeLine{\Hypertarget{ei__widget_8c_source_l00157}00157\ \ \ \ \ \ \ \ \ child\_clipper.\mbox{\hyperlink{structei__rect__t_a200c48a352d448a24d4f85673f6bad14}{size}}.\mbox{\hyperlink{structei__size__t_a2f152e26c90d01cac2b337ebc118a5f1}{height}}\ =\ ((clipper\_bottom\ <\ parent\_content\_bottom)\ ?\ clipper\_bottom\ :\ parent\_content\_bottom)\ -\/\ child\_clipper.\mbox{\hyperlink{structei__rect__t_aabe78780aa971b9cb9742ed59a2e9438}{top\_left}}.\mbox{\hyperlink{structei__point__t_a0c0f1bfa95c372595c52522877f556a0}{y}};}
\DoxyCodeLine{\Hypertarget{ei__widget_8c_source_l00158}00158\ }
\DoxyCodeLine{\Hypertarget{ei__widget_8c_source_l00159}00159\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (child\_clipper.\mbox{\hyperlink{structei__rect__t_a200c48a352d448a24d4f85673f6bad14}{size}}.\mbox{\hyperlink{structei__size__t_a981037618942814a4318a4c27cdaecc1}{width}}\ <=\ 0\ ||\ child\_clipper.\mbox{\hyperlink{structei__rect__t_a200c48a352d448a24d4f85673f6bad14}{size}}.\mbox{\hyperlink{structei__size__t_a2f152e26c90d01cac2b337ebc118a5f1}{height}}\ <=\ 0)\ \{}
\DoxyCodeLine{\Hypertarget{ei__widget_8c_source_l00160}00160\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return};\ \textcolor{comment}{//\ Le\ clipper\ résultant\ est\ vide,\ rien\ à\ dessiner\ pour\ les\ enfants.}}
\DoxyCodeLine{\Hypertarget{ei__widget_8c_source_l00161}00161\ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{\Hypertarget{ei__widget_8c_source_l00162}00162\ \ \ \ \ \}}
\DoxyCodeLine{\Hypertarget{ei__widget_8c_source_l00163}00163\ }
\DoxyCodeLine{\Hypertarget{ei__widget_8c_source_l00164}00164\ }
\DoxyCodeLine{\Hypertarget{ei__widget_8c_source_l00165}00165\ \ \ \ \ \textcolor{keywordflow}{while}\ (current\_child\ !=\ NULL)\ \{}
\DoxyCodeLine{\Hypertarget{ei__widget_8c_source_l00166}00166\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (current\_child-\/>\mbox{\hyperlink{structei__impl__widget__t_aad1c98bc7b84cb318801e78df23f9cf9}{placer\_params}}\ !=\ NULL)\ \{\ \textcolor{comment}{//\ Seulement\ si\ le\ widget\ est\ géré\ par\ un\ placeur\ (donc\ visible)}}
\DoxyCodeLine{\Hypertarget{ei__widget_8c_source_l00167}00167\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (current\_child-\/>\mbox{\hyperlink{structei__impl__widget__t_aa6ab44d2da83877b1d83e1a6cea7034e}{wclass}}\ !=\ NULL\ \&\&\ current\_child-\/>\mbox{\hyperlink{structei__impl__widget__t_aa6ab44d2da83877b1d83e1a6cea7034e}{wclass}}-\/>\mbox{\hyperlink{structei__widgetclass__t_a528168099a2a1515c4cf65400ccbfff2}{drawfunc}}\ !=\ NULL)\ \{}
\DoxyCodeLine{\Hypertarget{ei__widget_8c_source_l00168}00168\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ current\_child-\/>\mbox{\hyperlink{structei__impl__widget__t_aa6ab44d2da83877b1d83e1a6cea7034e}{wclass}}-\/>\mbox{\hyperlink{structei__widgetclass__t_a528168099a2a1515c4cf65400ccbfff2}{drawfunc}}(current\_child,\ surface,\ pick\_surface,\ \&child\_clipper);}
\DoxyCodeLine{\Hypertarget{ei__widget_8c_source_l00169}00169\ \ \ \ \ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{\Hypertarget{ei__widget_8c_source_l00170}00170\ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{\Hypertarget{ei__widget_8c_source_l00171}00171\ \ \ \ \ \ \ \ \ current\_child\ =\ current\_child-\/>\mbox{\hyperlink{structei__impl__widget__t_a638762e72c295c58b34c50c5b11425ae}{next\_sibling}};}
\DoxyCodeLine{\Hypertarget{ei__widget_8c_source_l00172}00172\ \ \ \ \ \}}
\DoxyCodeLine{\Hypertarget{ei__widget_8c_source_l00173}00173\ \}}
\DoxyCodeLine{\Hypertarget{ei__widget_8c_source_l00174}00174\ }
\DoxyCodeLine{\Hypertarget{ei__widget_8c_source_l00175}\mbox{\hyperlink{ei__widget__attributes_8h_ad30d50cb51fbc8510937c0f3928e361f}{00175}}\ \mbox{\hyperlink{structei__widgetclass__t}{ei\_widgetclass\_t}}*\ \mbox{\hyperlink{ei__widget_8c_ad30d50cb51fbc8510937c0f3928e361f}{ei\_widget\_get\_class}}(\mbox{\hyperlink{structei__impl__widget__t}{ei\_widget\_t}}\ widget)\ \{}
\DoxyCodeLine{\Hypertarget{ei__widget_8c_source_l00176}00176\ \ \ \ \ \textcolor{keywordflow}{if}\ (!widget)\ \textcolor{keywordflow}{return}\ NULL;}
\DoxyCodeLine{\Hypertarget{ei__widget_8c_source_l00177}00177\ \ \ \ \ \textcolor{keywordflow}{return}\ widget-\/>\mbox{\hyperlink{structei__impl__widget__t_aa6ab44d2da83877b1d83e1a6cea7034e}{wclass}};}
\DoxyCodeLine{\Hypertarget{ei__widget_8c_source_l00178}00178\ \}}
\DoxyCodeLine{\Hypertarget{ei__widget_8c_source_l00179}00179\ }
\DoxyCodeLine{\Hypertarget{ei__widget_8c_source_l00180}00180\ }
\DoxyCodeLine{\Hypertarget{ei__widget_8c_source_l00181}00181\ }
\DoxyCodeLine{\Hypertarget{ei__widget_8c_source_l00182}00182\ \textcolor{comment}{//\ Fonction\ pour\ trouver\ un\ widget\ par\ son\ pick\_id\ (récursive)}}
\DoxyCodeLine{\Hypertarget{ei__widget_8c_source_l00183}\mbox{\hyperlink{ei__widget_8c_ade050747c9b4ecc70e2ed1c9ea70c17e}{00183}}\ \textcolor{keyword}{static}\ \mbox{\hyperlink{structei__impl__widget__t}{ei\_widget\_t}}\ \mbox{\hyperlink{ei__widget_8c_ade050747c9b4ecc70e2ed1c9ea70c17e}{find\_widget\_by\_pick\_id}}(\mbox{\hyperlink{structei__impl__widget__t}{ei\_widget\_t}}\ current\_widget,\ uint32\_t\ pick\_id\_to\_find)\ \{}
\DoxyCodeLine{\Hypertarget{ei__widget_8c_source_l00184}00184\ \ \ \ \ \textcolor{keywordflow}{if}\ (current\_widget\ ==\ NULL)\ \{}
\DoxyCodeLine{\Hypertarget{ei__widget_8c_source_l00185}00185\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ NULL;}
\DoxyCodeLine{\Hypertarget{ei__widget_8c_source_l00186}00186\ \ \ \ \ \}}
\DoxyCodeLine{\Hypertarget{ei__widget_8c_source_l00187}00187\ \ \ \ \ \textcolor{keywordflow}{if}\ (current\_widget-\/>\mbox{\hyperlink{structei__impl__widget__t_ae9085b15b51f1a55434df1dbe68c034e}{pick\_id}}\ ==\ pick\_id\_to\_find)\ \{}
\DoxyCodeLine{\Hypertarget{ei__widget_8c_source_l00188}00188\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ current\_widget;}
\DoxyCodeLine{\Hypertarget{ei__widget_8c_source_l00189}00189\ \ \ \ \ \}}
\DoxyCodeLine{\Hypertarget{ei__widget_8c_source_l00190}00190\ \ \ \ \ \mbox{\hyperlink{structei__impl__widget__t}{ei\_widget\_t}}\ found\_in\_child\ =\ NULL;}
\DoxyCodeLine{\Hypertarget{ei__widget_8c_source_l00191}00191\ \ \ \ \ \mbox{\hyperlink{structei__impl__widget__t}{ei\_widget\_t}}\ child\ =\ current\_widget-\/>\mbox{\hyperlink{structei__impl__widget__t_aa4a6383448c3e9bee6a8b0bc2ae15dc9}{children\_head}};}
\DoxyCodeLine{\Hypertarget{ei__widget_8c_source_l00192}00192\ \ \ \ \ \textcolor{keywordflow}{while}\ (child\ !=\ NULL)\ \{}
\DoxyCodeLine{\Hypertarget{ei__widget_8c_source_l00193}00193\ \ \ \ \ \ \ \ \ \textcolor{comment}{//\ MODIF:\ Seulement\ chercher\ dans\ les\ widgets\ visibles\ (gérés\ par\ le\ placeur)}}
\DoxyCodeLine{\Hypertarget{ei__widget_8c_source_l00194}00194\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (child-\/>\mbox{\hyperlink{structei__impl__widget__t_aad1c98bc7b84cb318801e78df23f9cf9}{placer\_params}}\ !=\ NULL)\ \{}
\DoxyCodeLine{\Hypertarget{ei__widget_8c_source_l00195}00195\ \ \ \ \ \ \ \ \ \ \ \ \ found\_in\_child\ =\ \mbox{\hyperlink{ei__widget_8c_ade050747c9b4ecc70e2ed1c9ea70c17e}{find\_widget\_by\_pick\_id}}(child,\ pick\_id\_to\_find);}
\DoxyCodeLine{\Hypertarget{ei__widget_8c_source_l00196}00196\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (found\_in\_child\ !=\ NULL)\ \{}
\DoxyCodeLine{\Hypertarget{ei__widget_8c_source_l00197}00197\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ found\_in\_child;}
\DoxyCodeLine{\Hypertarget{ei__widget_8c_source_l00198}00198\ \ \ \ \ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{\Hypertarget{ei__widget_8c_source_l00199}00199\ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{\Hypertarget{ei__widget_8c_source_l00200}00200\ \ \ \ \ \ \ \ \ child\ =\ child-\/>\mbox{\hyperlink{structei__impl__widget__t_a638762e72c295c58b34c50c5b11425ae}{next\_sibling}};}
\DoxyCodeLine{\Hypertarget{ei__widget_8c_source_l00201}00201\ \ \ \ \ \}}
\DoxyCodeLine{\Hypertarget{ei__widget_8c_source_l00202}00202\ \ \ \ \ \textcolor{keywordflow}{return}\ NULL;}
\DoxyCodeLine{\Hypertarget{ei__widget_8c_source_l00203}00203\ \}}
\DoxyCodeLine{\Hypertarget{ei__widget_8c_source_l00204}00204\ }
\DoxyCodeLine{\Hypertarget{ei__widget_8c_source_l00205}00205\ }
\DoxyCodeLine{\Hypertarget{ei__widget_8c_source_l00206}\mbox{\hyperlink{ei__widget_8h_acb8c17b67534dd9a42e9e64149a98482}{00206}}\ \mbox{\hyperlink{structei__impl__widget__t}{ei\_widget\_t}}\ \mbox{\hyperlink{ei__widget_8c_acb8c17b67534dd9a42e9e64149a98482}{ei\_widget\_pick}}(\mbox{\hyperlink{structei__point__t}{ei\_point\_t}}*\ where)\ \{}
\DoxyCodeLine{\Hypertarget{ei__widget_8c_source_l00207}00207\ \ \ \ \ \textcolor{keywordflow}{if}\ (where\ ==\ NULL\ ||\ \mbox{\hyperlink{ei__application_8c_a17e93c0ffff66a7ab8772ba47b5c9247}{g\_pick\_surface}}\ ==\ NULL)\ \{}
\DoxyCodeLine{\Hypertarget{ei__widget_8c_source_l00208}00208\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ NULL;}
\DoxyCodeLine{\Hypertarget{ei__widget_8c_source_l00209}00209\ \ \ \ \ \}}
\DoxyCodeLine{\Hypertarget{ei__widget_8c_source_l00210}00210\ }
\DoxyCodeLine{\Hypertarget{ei__widget_8c_source_l00211}00211\ \ \ \ \ \mbox{\hyperlink{structei__size__t}{ei\_size\_t}}\ pick\_surface\_size\ =\ \mbox{\hyperlink{hw__interface_8h_a7b92235ad70d5017c843c66affccdcd2}{hw\_surface\_get\_size}}(\mbox{\hyperlink{ei__application_8c_a17e93c0ffff66a7ab8772ba47b5c9247}{g\_pick\_surface}});}
\DoxyCodeLine{\Hypertarget{ei__widget_8c_source_l00212}00212\ \ \ \ \ \textcolor{keywordflow}{if}\ (where-\/>\mbox{\hyperlink{structei__point__t_a6ec4a8846bae4b9694506dae039047b3}{x}}\ <\ 0\ ||\ where-\/>\mbox{\hyperlink{structei__point__t_a6ec4a8846bae4b9694506dae039047b3}{x}}\ >=\ pick\_surface\_size.\mbox{\hyperlink{structei__size__t_a981037618942814a4318a4c27cdaecc1}{width}}\ ||}
\DoxyCodeLine{\Hypertarget{ei__widget_8c_source_l00213}00213\ \ \ \ \ \ \ \ \ where-\/>\mbox{\hyperlink{structei__point__t_a0c0f1bfa95c372595c52522877f556a0}{y}}\ <\ 0\ ||\ where-\/>\mbox{\hyperlink{structei__point__t_a0c0f1bfa95c372595c52522877f556a0}{y}}\ >=\ pick\_surface\_size.\mbox{\hyperlink{structei__size__t_a2f152e26c90d01cac2b337ebc118a5f1}{height}})\ \{}
\DoxyCodeLine{\Hypertarget{ei__widget_8c_source_l00214}00214\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ \mbox{\hyperlink{ei__application_8h_a951633a600dd86ac1f68b1c4b47e5085}{ei\_app\_root\_widget}}();\ \textcolor{comment}{//\ Clic\ en\ dehors,\ on\ considère\ que\ c'est\ le\ root\ (ou\ NULL\ si\ on\ préfère)}}
\DoxyCodeLine{\Hypertarget{ei__widget_8c_source_l00215}00215\ \ \ \ \ \}}
\DoxyCodeLine{\Hypertarget{ei__widget_8c_source_l00216}00216\ }
\DoxyCodeLine{\Hypertarget{ei__widget_8c_source_l00217}00217\ \ \ \ \ \mbox{\hyperlink{hw__interface_8h_a1b9b22f29bb9de0b39ea904fd66251be}{hw\_surface\_lock}}(\mbox{\hyperlink{ei__application_8c_a17e93c0ffff66a7ab8772ba47b5c9247}{g\_pick\_surface}});}
\DoxyCodeLine{\Hypertarget{ei__widget_8c_source_l00218}00218\ \ \ \ \ uint8\_t*\ pixel\_buffer\ =\ \mbox{\hyperlink{hw__interface_8h_af25f53c3be139a626bd15d86ca7bceef}{hw\_surface\_get\_buffer}}(\mbox{\hyperlink{ei__application_8c_a17e93c0ffff66a7ab8772ba47b5c9247}{g\_pick\_surface}});}
\DoxyCodeLine{\Hypertarget{ei__widget_8c_source_l00219}00219\ \ \ \ \ \textcolor{keywordtype}{int}\ bytes\_per\_pixel\ =\ 4;}
\DoxyCodeLine{\Hypertarget{ei__widget_8c_source_l00220}00220\ \ \ \ \ uint8\_t*\ target\_pixel\_ptr\ =\ pixel\_buffer\ +\ (where-\/>\mbox{\hyperlink{structei__point__t_a0c0f1bfa95c372595c52522877f556a0}{y}}\ *\ pick\_surface\_size.\mbox{\hyperlink{structei__size__t_a981037618942814a4318a4c27cdaecc1}{width}}\ +\ where-\/>\mbox{\hyperlink{structei__point__t_a6ec4a8846bae4b9694506dae039047b3}{x}})\ *\ bytes\_per\_pixel;}
\DoxyCodeLine{\Hypertarget{ei__widget_8c_source_l00221}00221\ }
\DoxyCodeLine{\Hypertarget{ei__widget_8c_source_l00222}00222\ \ \ \ \ \textcolor{keywordtype}{int}\ ir,\ ig,\ ib,\ ia;}
\DoxyCodeLine{\Hypertarget{ei__widget_8c_source_l00223}00223\ \ \ \ \ \mbox{\hyperlink{hw__interface_8h_afd8e86abad6a3f16317d74e541d5034d}{hw\_surface\_get\_channel\_indices}}(\mbox{\hyperlink{ei__application_8c_a17e93c0ffff66a7ab8772ba47b5c9247}{g\_pick\_surface}},\ \&ir,\ \&ig,\ \&ib,\ \&ia);}
\DoxyCodeLine{\Hypertarget{ei__widget_8c_source_l00224}00224\ }
\DoxyCodeLine{\Hypertarget{ei__widget_8c_source_l00225}00225\ \ \ \ \ uint8\_t\ r\_val\ =\ target\_pixel\_ptr[ir];}
\DoxyCodeLine{\Hypertarget{ei__widget_8c_source_l00226}00226\ \ \ \ \ uint8\_t\ g\_val\ =\ target\_pixel\_ptr[ig];}
\DoxyCodeLine{\Hypertarget{ei__widget_8c_source_l00227}00227\ \ \ \ \ uint8\_t\ b\_val\ =\ target\_pixel\_ptr[ib];}
\DoxyCodeLine{\Hypertarget{ei__widget_8c_source_l00228}00228\ \ \ \ \ \textcolor{comment}{//\ uint8\_t\ a\_val\ =\ (ia\ !=\ -\/1)\ ?\ target\_pixel\_ptr[ia]\ :\ 0xff;\ //\ Alpha\ de\ la\ pick\_color\ (normalement\ 0xff)}}
\DoxyCodeLine{\Hypertarget{ei__widget_8c_source_l00229}00229\ }
\DoxyCodeLine{\Hypertarget{ei__widget_8c_source_l00230}00230\ \ \ \ \ \mbox{\hyperlink{hw__interface_8h_abf4681e5ead295ccf5b3df3ec8adab66}{hw\_surface\_unlock}}(\mbox{\hyperlink{ei__application_8c_a17e93c0ffff66a7ab8772ba47b5c9247}{g\_pick\_surface}});}
\DoxyCodeLine{\Hypertarget{ei__widget_8c_source_l00231}00231\ }
\DoxyCodeLine{\Hypertarget{ei__widget_8c_source_l00232}00232\ \ \ \ \ \textcolor{comment}{//\ Reconstruire\ le\ pick\_id}}
\DoxyCodeLine{\Hypertarget{ei__widget_8c_source_l00233}00233\ \ \ \ \ uint32\_t\ picked\_id\ =\ ((uint32\_t)r\_val\ <<\ 16)\ |\ ((uint32\_t)g\_val\ <<\ 8)\ |\ (uint32\_t)b\_val;}
\DoxyCodeLine{\Hypertarget{ei__widget_8c_source_l00234}00234\ }
\DoxyCodeLine{\Hypertarget{ei__widget_8c_source_l00235}00235\ \ \ \ \ \textcolor{keywordflow}{if}\ (picked\_id\ ==\ 0)\ \{\ \textcolor{comment}{//\ ID\ 0\ est\ réservé\ pour\ le\ fond\ (non-\/widget\ cliquable)}}
\DoxyCodeLine{\Hypertarget{ei__widget_8c_source_l00236}00236\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ \mbox{\hyperlink{ei__application_8h_a951633a600dd86ac1f68b1c4b47e5085}{ei\_app\_root\_widget}}();}
\DoxyCodeLine{\Hypertarget{ei__widget_8c_source_l00237}00237\ \ \ \ \ \}}
\DoxyCodeLine{\Hypertarget{ei__widget_8c_source_l00238}00238\ }
\DoxyCodeLine{\Hypertarget{ei__widget_8c_source_l00239}00239\ \ \ \ \ \mbox{\hyperlink{structei__impl__widget__t}{ei\_widget\_t}}\ picked\_widget\ =\ \mbox{\hyperlink{ei__widget_8c_ade050747c9b4ecc70e2ed1c9ea70c17e}{find\_widget\_by\_pick\_id}}(\mbox{\hyperlink{ei__application_8h_a951633a600dd86ac1f68b1c4b47e5085}{ei\_app\_root\_widget}}(),\ picked\_id);}
\DoxyCodeLine{\Hypertarget{ei__widget_8c_source_l00240}00240\ \ \ \ \ \textcolor{keywordflow}{return}\ (picked\_widget\ !=\ NULL)\ ?\ picked\_widget\ :\ \mbox{\hyperlink{ei__application_8h_a951633a600dd86ac1f68b1c4b47e5085}{ei\_app\_root\_widget}}();\ \textcolor{comment}{//\ Si\ non\ trouvé\ (ne\ devrait\ pas\ arriver\ si\ ID\ !=\ 0),\ retourne\ root}}
\DoxyCodeLine{\Hypertarget{ei__widget_8c_source_l00241}00241\ \}}

\end{DoxyCode}
